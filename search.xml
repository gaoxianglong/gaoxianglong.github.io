<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>为啥蒙娜丽莎让LLM无法识别</title>
    <url>/2025/06/03/%E4%B8%BA%E5%95%A5%E8%92%99%E5%A8%9C%E4%B8%BD%E8%8E%8E%E8%AE%A9LLM%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB/</url>
    <content><![CDATA[
前言我们能够从这样一张被严重干扰、图像信息高度残缺的图中识别出“蒙娜丽莎”，并不是因为我们依赖像素级别的图像细节，而是因为大脑视觉系统具备高度层次化、交互式的信息加工机制。视觉信息首先在初级视觉皮层(V1区)中被处理为边缘、方向、空间频率等低级特征，然后这些初级特征被逐步整合至中高级视觉区域，在这里，大脑不仅识别出局部形状与颜色模式，还能基于过往经验构建整体结构的认知模板。例如，当大脑检测到类似人脸对称分布的亮暗交替、眼鼻嘴的大致位置、甚至某些典型的艺术构图比例时，它会迅速激活与人脸或蒙娜丽莎相关的记忆表征。更关键的是，人类视觉系统是自底向上（bottom-up）与自顶向下（top-down）双向交互的。来自视网膜的信息不断向上传递，但同时，大脑的高级区域（前额叶皮层、顶叶）也会基于上下文、期望、语言标签等信息反向调控视觉皮层的活动。这种预测-校验模型（predictive coding）使得我们在面对模糊或不完整刺激时，能够预测图像内容，并对残缺信息进行补全，进而识别出其中的语义目标。相比之下，现有的AI视觉模型无论是卷积神经网络（CNN）还是视觉Transformer（ViT）虽然在标准图像识别任务中表现出色，但它们的处理过程依然主要是从像素特征中逐层提取统计模式，缺乏真正的上下文理解、模态记忆唤起与结构性补全机制。也就是说，AI在识别时是独立处理的，不具备像人类那样调动”这是画”、”这是著名头像”、”这可能是蒙娜丽莎”这些跨层知识结构的能力。因此，当图像遭到严重扰动，表层像素统计特征失真时，AI往往无法从中恢复高层语义，而人类则依赖认知结构和经验推理，实现”看见”本质。
我们看到的世界，实际上并不是眼睛直接显示的图像，而是经过一套高度复杂的神经通路进行加工和解释后，由大脑视觉皮层重构的结果。这一进程以光线进入眼睛为起点，最终在大脑中形成有意义的图像。
光转神经信号光线从外部世界进入眼睛，穿过角膜、晶状体等结构后，会聚焦在眼球后部的视网膜上，视网膜中的感光细胞在物理结构上位于最深层，光线在抵达这些感光单元前，需先穿透多层神经细胞层，包括神经节细胞、双极细胞、无长突细胞与水平细胞等。这意味着，光线的入射路径与神经信号的传导路径方向完全相反。当光线进入眼内后，会以物理方式依次穿过这些非感光神经层，最终到达位于最内侧、贴近色素上皮层的感光细胞。这一过程不涉及任何神经递质或电信号，仅为单纯的光学穿透。而真正的信息处理始于光激活感光细胞后产生的电位变化，随后通过神经递质传递至双极细胞，经由水平细胞与无长突细胞的调控，在双极细胞与神经节细胞之间完成信号传递。神经节细胞的轴突末梢聚合形成视神经，将处理后的信号经丘脑（负责参与意识维持、注意调节、运动计划等高级神经功能）投射至大脑视觉皮层，最终完成视觉感知，如图1所示。从信息流动的视角来看，感光细胞是视觉通路中的起点，而神经节细胞及其轴突所组成的视神经，是通向中枢神经系统的输出路径。两者之间虽然在空间结构上呈纵深分布，但在功能逻辑上仍体现出由周边感知向中枢集成的单向通路特征。这一结构安排表面上似乎不具效率优势，特别是在中央凹以外区域，光线需穿透的组织较多，理论上可能造成信号衰减。然而，视网膜的组织具有高度透明性，中央凹区域更是通过移位机制使上层神经元让位于侧方，使得感光细胞可直接暴露于入射光之下，优化了成像质量。
视神经通路：从眼睛到大脑的路线图多个神经节细胞的轴突并排组成了视神经纤维束，这些轴突在解剖结构上依次穿过视神经、视交叉和视束（交叉后的神经束，向 LGN 传输整合后的视觉信息），三者实际上是同一组轴突在不同位置的称谓。视网膜上的节细胞会将处理过的视觉信号汇总成视神经信号。每只眼睛输出一条视神经，这些信号进入大脑前会在视交叉（optic chiasm）处交叉，简单来说，大脑左半球（左侧视皮层）负责处理我们双眼右侧的视野，大脑右半球（右侧视皮层）处理左侧的视野。 交叉之后，信号被送入丘脑中的一个重要中继站——外侧膝状体（LGN）。在灵长类动物（如人或猴子）中，LGN分为6层：1-2层是M型细胞主导，处理运动、亮度和大致结构信息；3-6层是P型细胞主导，处理颜色和精细图像。这些信号在LGN中被进一步加工和分类，然后通过视放射投送到V1。当动作电位沿这些轴突传导至其轴突末梢时，末梢在LGN区域与LGN神经元的树突构成突触结构。此处的突触前膜释放谷氨酸等兴奋性神经递质，作用于突触后膜上的受体，引发LGN神经元膜电位变化，进而触发新的动作电位。该信号随后将被进一步传输至V1，完成视觉信号的第一轮中继加工。V1接收到来自LGN的信号后，会根据空间位置、方向、亮度变化等要素进一步分析视觉信息。此时的神经元不仅仅是接受输入，它们会选择性地响应特定的图像特征，比如：边缘、线条、颜色对比等。信息沿着背侧通路和腹侧通路继续往更高级的视觉区域传递。前者负责处理运动和空间位置，后者则处理颜色、形状和物体识别。这种逐层抽象的方式，使我们最终不仅能看到物体，还能识别出这是一个在移动的红色小球。
神经节细胞与LGN的感受野结构与功能感受野（Receptive Field）是指在一个神经系统中，某个特定神经元的输出活动所依赖的输入空间中那一局部区域的集合，只有该区域的刺激能够影响该神经元的反应。（你可以将感受野理解为函数是否执行的前置判断条件）。神经节细胞的感受野一般是圆形，有中心和周边两部分，分为两类：给光中心型（on-center）与撤光中心型（off-center）。前者在中心受光时兴奋（放电增加），周边受光时抑制（放电减少）；后者则相反，中心受光抑制，周边受光兴奋。LGN细胞的感受野结构与视网膜神经节细胞相似，也有给光中心型与撤光中心型，并呈现中心-周边拮抗响应。它们负责将视觉信息从视网膜传递到大脑皮层，保留了视网膜的感受野特性。感受野的大小范围从中央凹的0.01mm到周边视网膜的&gt;1mm，感受野越小，空间分辨率越高，因此在黄斑区域视觉最为敏锐。视网膜神经节细胞及其在LGN中的对应细胞可进一步分为两类通路：P通路与M通路。P通路源自视网膜的P型神经节细胞，具有感受野小、空间分辨率高、对颜色敏感等特征，主要处理细节和颜色信息；M通路则源自M型神经节细胞，感受野较大、传导速度快、对运动和闪烁刺激更敏感，主要处理动态变化。感受野不仅适用于视觉系统，在触觉、听觉、嗅觉甚至高级皮层中也有广泛应用。例如，在视觉系统中它对应视野的某一区域，在触觉中是皮肤上某一块区域，在听觉中是某个频率范围的声音，而在高级皮层中则可能响应面孔、图形组合或运动方向等复杂特征。从视网膜到视觉皮层的多层处理路径中，每一层神经元都拥有其独特的感受野，且感受野会随着处理层级上升变得更大、更抽象，体现出功能上的进化与整合。
神经信号的兴奋与抑制机制当一个神经元触发动作电位时，它会通过突触释放一种固定类型的神经递质，这种递质可能是兴奋性的（如谷氨酸），也可能是抑制性的（如GABA）。兴奋性递质会让下游神经元的膜电位去极化，更容易触发动作电位；抑制性递质则让膜电位超极化，更难触发动作电位。但动作电位的出现并不意味着传递的是兴奋信号，例如，一个释放GABA的神经元即使受到强烈输入产生动作电位，释放的仍然是抑制性信号。这是因为递质的种类是由该神经元的“基因身份”决定的，与它自身的输入受体类型无关，不会因外部刺激而改变。然而，真正决定神经信号意义的，是下游神经元膜上的受体类型。递质只是信息载体，而受体决定它传递的是兴奋还是抑制效应。例如，谷氨酸激活AMPA&#x2F;NMDA受体会引起去极化，产生兴奋性反应；GABA激活GABAa受体则引起超极化，形成抑制作用。神经元本身并不会判断信号好坏，它只是接收、整合所有突触输入（兴奋与抑制）并在轴丘（axon hillock）完成电位整合。如果整合后的膜电位达到阈值（约-55mV），就会触发动作电位；否则不会放电。这种机制体现了时空整合 + 阈值判断的原则，感受野决定”要不要接”，受体决定”怎么解读”，膜电位变化决定”放不放电”，而递质则传达”哪种信号情绪”。
视皮层的功能构造在我们大脑的视觉皮层里，很多神经元是按垂直柱状排成一组一组的。在大脑皮层，尤其是V1中，所谓的柱状排列是指对同一类刺激（比如：某个方向的线条、来自同一只眼的输入）有相似反应的神经元（主要是兴奋性的锥体细胞），它们从皮层的表面（第1层）一直排列到深层（第6层），垂直方向组成一根柱子，这就是功能柱（functional column）。这些组会整齐地穿过大脑皮层的整个厚度（人类大脑皮层（包括视觉皮层）厚度通常在 2 – 4 mm 范围内，平均约 2.5 mm；不同区域略有差异：感官区相对较薄（约2mm），运动区可达到4mm以上）。每个小组的神经元会处理来自视网膜某个小区域的信息，也就是说，大脑把每个小区域的信息专门交给一小群神经元处理，如图2所示。V1区具有6层分层结构，每一层在接收输入、进行处理和输出信号方面承担着明确而独立的功能，如下所示：



层级
输入来源
输出去向
细胞类型
主要功能



第1层
几乎无直接输入
局部调控
局部调控细胞
接收来自皮层内其它层的反馈，调节活动


第2&#x2F;3层
接收第4层Cβ区传来的处理结果
第3层向高级视觉皮层（如V2）输出
复杂细胞、色斑相关细胞
整合方向、颜色等高阶信息，第2层主要用于局部处理，第3层是主要外输层


第4层
直接接收外侧膝状体（LGN）输入
向第2&#x2F;3层等上传
简单细胞
初步处理眼源信息，区分左右眼输入（眼优势柱核心）


第5层
接收来自第2&#x2F;3层或第4层的整合信息
输出至脑干和上丘等深部脑结构
复杂细胞
参与调控眼动反射、定位快速反应路径等本能行为


第6层
局部回馈和长程反馈
回传至LGN或调控皮层其它区域
多种神经元类型
调节输入信息回路，参与反馈调控


在视觉系统中，不同皮层层级的神经元承担着不同的输出任务，体现了认知加工与本能反应的分工机制。其中，第3层的神经元将处理结果输出至高级视觉皮层区域，如V2、V3，主要用于空间整合（比简单细胞更复杂的空间结构加工与感知输出准备）、颜色识别和图形轮廓等复杂的认知加工型视觉任务；而第5层的输出则面向脑干和上丘，构成一条反应型下行通路，用于快速定位、眼球运动、闪避反射等不依赖意识控制的本能性视觉调控行为。需要注意的是，上丘和脑干并不属于视觉皮层，也不位于皮层内部结构之中。它们是源自视网膜信息的另一条并行投射路径，与通向V1的主通路同时并发运行。从解剖结构上看，它们处于皮层下游，但在本能反应链条中却扮演上游控制者的角色，负责快速控制眼球运动、空间定位与头部转向等反射性行为，而非参与视觉认知加工。这种结构和功能的协同，使得视觉系统既能实现对环境的深度理解，又能保障对突发刺激的迅速反应。
V1的结构逻辑与信息整合机制视觉信息首先从视网膜传入LGN，在LGN中分为来自左眼和右眼的独立通路，再分别投射到V1区。在V1中，不同来源的眼睛信号分别投射到不同的眼优势柱（ocular dominance column），每个柱子是垂直方向从第1层到第6层的连续神经元结构。眼优势柱彼此之间在水平方向上并不连接，属于功能独立的区域。每一个眼优势柱只偏好处理来自某一只眼的输入信号。在眼优势柱内部嵌套有朝向柱（orientation column），这些柱子负责处理特定方向的线条信息。例如某些朝向柱更偏好垂直线条，另一些偏好水平或倾斜方向的线条。朝向柱之间存在“水平连接”，这种连接不是结构粘合，而是神经元之间通过轴突横向延伸所形成的突触连接。这种连接会把“方向相似”的信息彼此传递，有利于多个朝向柱整合信息，实现“线”的延展。除了朝向柱，还有“色斑”（blob）结构，主要分布在V1皮层的第2&#x2F;3层，负责处理颜色信息。色斑和朝向柱是功能独立的结构，两者互不连接。色斑自己也具有水平连接机制，但连接对象是其他色斑，主要用于颜色整合，而不是方向整合。V1皮层除了存在垂直结构（眼优势柱、朝向柱、色斑）之外，还有明显的水平方向连接系统。这些连接主要发生在第2&#x2F;3层，延伸距离较长，可以跨越多个柱子单位。它们的功能是将“功能相似”的神经元进行远距离通信，实现从“点”到“线”再到“面”的整合过程。整个V1的结构可以归纳为：眼优势柱之间互不相连，彼此独立并发处理来自左右眼的输入信号；朝向柱嵌套在眼优势柱中，负责识别线条方向；色斑独立存在于浅层，负责处理颜色；第2&#x2F;3层的水平连接实现了信息在空间上的整合。V1的这种“垂直+水平”双重组织方式，能够在保持对每只眼输入独立处理的同时，实现空间结构的联合分析。最终目标是把来自视网膜的光点信息，整合成具有方向、边缘、轮廓与颜色特征的完整二维图像表征。这种结构保证了V1不仅能精准处理局部信息，还具备强大的模式整合能力，为高级视觉区域（如V2、V4、MT）提供了稳定的基础信息流。
左右眼的视差处理我们之所以能感知立体深度和物体在空间中的位置，核心在于大脑对左右眼视觉差异的整合处理。所谓左右眼差异，主要包括三种类型，第一是视差（binocular disparity），由于两只眼分布在不同位置（平均相距约6.5厘米），从不同角度观看同一物体会产生图像位移，这就是闭一只眼看手指、换眼后手指跳动的原因；第二是亮度与色差（intensity&#x2F;color disparity），光线入射角度不同会导致两眼对同一物体的亮度和颜色感知略有差异，比如阳光斜射时，两眼看到的阴影不同；第三是边缘方向差异（orientation or contour difference），当观察斜放的立体物体时，两眼中看到的边缘方向可能有所不同。这些微小差异，是人脑进行空间判断与立体知觉计算的关键线索。视觉系统对这些差异的处理过程具有明显的层次性，在视网膜和LGN阶段，左右眼的信息是分开处理的，彼此独立、没有融合；而在初级视觉皮层V1中，神经系统首次将来自双眼的信号输入到同一个神经元中（比如：双眼型简单细胞），开始对图像间的差异进行神经层面的整合。这种整合产生了我们对空间深度、立体感、边缘方向等的感知能力。更高级的视觉整合还涉及V2、V4、MT&#x2F;V5等脑区，它们协同处理方向、颜色、运动等图像特征。同时，胼胝体作为连接左右大脑半球的神经通路，确保左右V1之间的视觉信息能实现跨脑整合，使我们最终在意识中感知到的是一个连续、统一的三维视觉世界。
眼优势柱所谓眼优势柱中的眼，指的是每一根柱状结构内的神经元，都更偏好来自左眼或右眼的输入。这些柱子是垂直排列的功能单元，从皮层的第1层一直延伸到底层，第4层接受LGN输入，第3层、第5层等则进行信息加工或输出。每根柱子里包含了不同类型的神经元，比如：

锥体细胞（pyramidal cell）：主要负责输出信息，常在3、5、6层，有长轴突，信息可以传到很远的地方，是主要的输出细胞。
星形细胞（stellate cell）：多在第4层，局部连接细胞，轴突分支短，信息传导范围小，主要是内部加工。它们都属于响应某一只眼的那根柱子，也就是具有相同眼优势的神经元聚集在一起，垂直排列，功能一致。

↑ 垂直方向（6层）││  左眼柱       右眼柱       左眼柱       右眼柱│  ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐│  │      │   │      │   │      │   │      │   ← 柱状：从1层到底层，垂直排列│  │      │   │      │   │      │   │      ││  │      │   │      │   │      │   │      │└────────────────────────────────────→ 水平方向分布出“条纹”
在V1中，从表层到深层垂直排列着许多柱状结构，每根柱子中的神经元对某只眼有偏好，左眼柱和右眼柱在皮层表面呈条纹状交替分布，但每根柱本身是垂直结构，功能一致。在初级视觉皮层中，眼优势柱是垂直排列的功能柱，响应同一只眼的输入。左眼柱和右眼柱在皮层表面交替分布，从水平方向看，呈现出条纹或波纹状的图案；但本质上它们是垂直穿过皮层六层的柱状结构。眼优势柱不是只接一只眼的信号，而是对一只眼更敏感。另一只眼的信息能传进来，也会被处理，只是反应较弱。
朝向柱视觉皮层中的神经元不仅对眼睛来源有偏好，还对物体的朝向有偏好。在猫的大脑皮层中，研究人员用电极记录不同位置神经元最喜欢的线条方向，比如某个神经元对45°倾斜的线条最敏感。沿着皮层表面移动电极，记录会逐渐发生规律性变化，说明视觉皮层存在朝向柱结构。朝向柱是在皮层上按一定方向排列的细胞群，每个柱子对不同方向的线条最敏感。每个朝向柱嵌套在某个眼优势柱里，它们共同决定一个神经元最喜欢来自哪只眼+看到什么方向的东西。这两种偏好叠加，决定了神经元的强反应模式。也就是说，某个神经元既更喜欢左眼输入，又喜欢45度方向的线条。所以当你同时给它左眼 + 斜着的线条，就会引起最强烈的反应。朝向柱（orientation column）是嵌套在眼优势柱（ocular dominance column）内部的结构，两者都是沿着大脑皮层六层结构垂直延伸的功能柱状单元。它们之间的组织关系是，一个眼优势柱包含多个朝向柱。
眼优势柱和朝向柱在V1中的分布在初级视觉皮层（V1）中，眼优势柱（ocular dominance columns）和朝向柱（orientation columns）是两类关键的功能结构，它们以垂直方式贯穿整个六层皮层，共同构成大脑早期视觉信息加工的核心架构。二者分别处理不同维度的信息，眼优势柱偏好来自某一只眼的输入，朝向柱则对特定方向的线条刺激更为敏感。两者在皮层中紧密交织、结构重叠，但在不同层级中分布着不同类型的神经元，并承担着不同的加工任务。眼优势柱的结构特点主要体现在第4层（特别是4Cβ层），该层中大量的简单细胞（simple cells）对某只眼输入具有偏好性，执行左右眼信号的初步分离，是双眼整合的基础来源。虽然其功能分化主要集中于第4层，但它作为柱状结构实际上是从第1层垂直贯穿至第6层，在第2&#x2F;3层和第5&#x2F;6层也分布有复杂细胞（complex cells），用于维持眼来源信息在整个柱结构中的一致性，确保眼偏好在多层次处理中连续保留。相较之下，朝向柱的关键加工集中在第2&#x2F;3层和第5&#x2F;6层，这些层分布的复杂细胞擅长整合方向、边缘、运动等高阶视觉特征，实现对刺激方向的不变性识别。同时，朝向柱在第4层也包含部分方向敏感的简单细胞，参与初步的方向选择性提取。可以说，眼优势柱侧重于输入来源的空间通道整合，而朝向柱则侧重于刺激特征的方向选择与感知抽象，二者通过六层皮层中不同类型神经元的功能分工，协同完成早期视觉信号的分析与编码。当一个视觉刺激同时符合某一朝向柱的方向偏好，并来自该柱所在眼优势柱所偏好的眼睛时，相关神经元会表现出更强的放电反应。这种结构上的垂直交叠与功能上的高度协同，使得V1具备了高效整合空间、方向和眼源等多维视觉信息的能力。最终，V1通过规则排列的眼优势柱、朝向柱以及色斑（blobs）构建起被称为超柱（hypercolumn）的功能单元，在每一个位置上同步整合眼来源、方向选择性和颜色感知三类核心特征，为更高层次的视觉任务（如空间定位、物体识别与双眼融合）打下坚实的神经基础。
色觉细胞集群（色斑）除了方向和眼睛偏好外，视觉皮层还有专门处理颜色信息的区域，称为色斑（blob）。这些细胞对不同颜色（红绿蓝等）有强烈反应。色斑（blob）不是像眼优势柱或朝向柱那样的完整柱状结构，它主要是局限在V1区的第2&#x2F;3层，并没有明显地贯穿整个六层皮层。朝向柱和色斑是在眼优势柱结构范围内被内嵌的功能模块，但它们的功能上各自独立，是并列存在的处理系统。
跨脑区整合的胼胝体大脑的左右半球在处理视觉信息时具有明确的分工机制。视觉信号在进入大脑后，首先经过视交叉（optic chiasm）实现初步分流。来自左侧视野的信息无论由哪只眼睛接收，都会被传导至右侧大脑半球；而来自右侧视野的信息则被传导至左侧大脑半球。这一分配模式是通过视交叉处的神经纤维交叉实现的，鼻侧视网膜的轴突交叉进入对侧大脑，颞侧视网膜的轴突则保留在同侧。该结构确保了视野而非眼球本身决定信息投射路径。虽然左右大脑分别处理来自对侧视野的信息，但为了形成一个连续、无缝整合的视觉体验，左右视觉皮层必须保持同步，这一整合作用由胼胝体（corpus callosum）完成。如图3所示，胼胝体是一条横跨左右大脑半球的大型神经纤维通路，它不属于视觉皮层，它将左侧和右侧的初级视觉皮层（V1）区域中的同源神经元彼此连接，承担视觉信息的横向同步功能。通过这种连接机制，左右V1区域能够实时交换加工结果，实现对双侧图像的同步和对接。胼胝体并不参与图像的初级解码或复杂特征分析，它不处理视差、亮度、颜色或边缘方向等图像属性。这些功能由V1内部的双眼型神经元完成，它们负责对来自双眼的物理差异进行神经整合。胼胝体的职责是在此基础上，将左右半脑各自处理后的图像信息在皮层层面对齐整合，从而使大脑能够形成一个统一、连续的视觉世界。整个视觉信息的传递流程包括：视网膜采集光信号，经视神经传入大脑，在视交叉处完成左右视野的分流，再分别投射至对侧的V1区。随后，胼胝体实现左右V1之间的信息交互，完成图像的最终拼接与主观上的统一感知。这一结构体系使得人类能够稳定地感受到一个连续、完整的视觉场景。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>视网膜</tag>
        <tag>神经网络</tag>
      </tags>
  </entry>
  <entry>
    <title>信号转导中离子通道的结构与功能作用</title>
    <url>/2025/07/13/%E4%BF%A1%E5%8F%B7%E8%BD%AC%E5%AF%BC%E4%B8%AD%E7%A6%BB%E5%AD%90%E9%80%9A%E9%81%93%E7%9A%84%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8A%9F%E8%83%BD%E4%BD%9C%E7%94%A8/</url>
    <content><![CDATA[
前言神经细胞的电信号是由离子通过神经细胞膜上的水相孔道传导的。这些水相孔道是由离子通道所形成的膜蛋白复合体。单个通道中离子的流动可以被测量和记录。大多数通道对某些离子具有高度选择性，例如，钠通道（Na⁺）几乎只允许钠离子通过。通道会在打开和关闭状态之间切换，每次打开的持续时间是其电流传导的一个特征。通道的开启由许多机制调控，包括膜电压变化、膜张力变化、以及一些配体（如神经递质）与通道的结合。离子通过通道的方式，可以是自由扩散，也可以通过结合位点跳跃式传递（有些通道像滑梯，一放就过；有些像接力点组成的输送带，离子一步步被往前推）。无论哪种方式，离子都是被动地穿过通道，其流动方向由浓度梯度或电位梯度驱动。这种驱动机制源于物理和化学的基本规律，统称为电化学梯度。细胞膜是一层由脂质双分子层构成的生物屏障，具有高度选择性。离子本身无法直接穿过脂层，因此依赖嵌入膜中的离子通道蛋白来实现跨膜流动。当这些通道打开时，离子是否流动以及朝哪个方向流动，取决于膜两侧的离子浓度差和电位差。其中浓度梯度指的是膜内外同一离子的浓度差。离子具有自发趋向浓度由高到低扩散的趋势。例如，钠离子（Na⁺）在静息状态下细胞外浓度远高于细胞内，因此在钠通道打开时，Na⁺会自然从外向内扩散。而电位梯度指的是细胞膜两侧电荷分布的不均衡。多数情况下，膜内呈负电位，膜外呈相对正电位。这种电位差构成一个电场，能对带电离子产生吸引或排斥力。阳离子会被膜内的负电吸引而内流，阴离子则可能被排斥或向外流动。浓度梯度和电位梯度共同决定了离子的跨膜流动方向与速度。当两者方向一致时，离子流动更迅速；当两者方向相反时，最终流动情况取决于哪种驱动力占优。这种机制使得离子通道在不消耗能量的前提下实现高效选择性传导。总而言之，离子通过膜通道的方式本质上是一个被动过程，受控于电化学梯度。这一机制是细胞膜维持稳态和实现信号传递的基础。
神经细胞膜和通道的结构如图1所示，神经元的外壳是一层叫做细胞膜（plasma membrane）的结构，由脂质双分子层（lipid bilayer）构成。每个磷脂分子拥有亲水头部和疏水尾部，脂质分子以尾对尾方式排列，形成约 6~8 纳米厚的绝缘屏障，无法让带电离子自由通过。细胞膜的核心作用是将胞质与胞外液隔离开来。要实现电信号的跨膜传导，必须借助嵌入这层膜的专用门——离子通道（ion channels）。这些通道由跨膜蛋白分子（transmembrane proteins）构成，像吸管一样贯穿整个细胞膜，一端通向膜外，一端通向膜内，通道内部为亲水性空腔，仅允许特定离子（如 Na⁺、K⁺、Ca²⁺）通过。它们既不是悬挂在膜外，也不是隐藏在膜内，而是完整地插入并穿透膜结构，成为膜本身的一部分。神经信号的本质是膜电位的变化。神经元细胞膜两侧存在离子浓度差和电位差，当通道开启后，离子沿浓度梯度通过通道（例如 Na⁺ 流入），引发膜电位变化，这一变化沿膜传播，构成电信号。因此，信号并非在细胞外部流动，而是在膜上以跳跃式的方式推进。神经元胞体和胞质在这个系统中并非被动角色，细胞内的 Na⁺&#x2F;K⁺ 泵持续消耗 ATP 以维持电化学梯度；内质网和高尔基体合成离子通道蛋白；轴突末梢的 Ca²⁺ 内流触发神经递质释放；树突和胞体则整合突触输入，决定是否触发动作电位。整个系统通过离子通道引导离子跨膜流动，并由神经元内部提供运行所需的能量与结构支持。
离子通道的特性离子通道是由跨膜蛋白质构成的结构单元，其三维构型决定了通道的物理形状和离子通透性，是其功能选择性的基础。不同类型的离子通道具备高度选择性，例如钠通道专门允许 Na⁺ 离子通过，而对其他离子（如 Ca²⁺ 或 K⁺）则具有排斥性；同理，钙通道则主要选择 Ca²⁺，在分子层面上形成了精准的离子筛选机制。这些通道并非始终处于开放状态，而是根据特定的化学或电信号动态切换开启与关闭。其行为符合一定的统计规律，例如每类通道在特定环境下会表现出一个平均开启时间的特征，反映了它们在生理条件下的激活概率和持续时间。这些物理与动力学特征共同决定了离子通道在信号转导过程中的核心作用。
离子通道的激活方式电压门控通道：主要分布在轴丘、轴突和轴突末梢，是动作电位产生和传导的核心机制。当膜电位达到阈值（约 -55mV）时，轴丘处的大量电压门控钠通道被激活，Na⁺迅速内流，引发去极化，随后电压门控钾通道开启，K⁺外流，形成复极化。这些通道负责整个动作电位的起始与传播，属于典型的电压门控机制。配体门控通道：分布于神经元的树突和胞体膜上，主要存在于突触后膜区域。突触前膜释放的神经递质（如乙酰胆碱、谷氨酸）扩散至突触间隙，与突触后膜上的配体门控通道结合，使通道构象改变并打开，离子（如Na⁺或Cl⁻）跨膜流动，形成局部电位变化。配体门控通道主要负责将化学信号转换为电信号，为轴丘整合和判断是否触发动作电位提供输入。配体门控通道是一种特殊类型的受体，它本身就带“通道”功能。配体（如神经递质）一结合，受体自动变成一个开门的通道，让离子流动、产生电信号。机械门控通道：分布于外周感受器区域，机械门控通道是指对物理形变敏感的通道——它们不是通过电压或化学物质来打开的，而是通过”物理拉扯、挤压、伸展”等机械力量激活的。当细胞膜被拉伸、压迫、弯曲时，这种形变会拉动通道蛋白结构发生变化，从而打开通道，允许离子流入或流出。比如触觉感受器，当你按压皮肤时，局部神经末梢被挤压 → 细胞膜被拉伸，嵌在膜上的机械门控通道打开 → Na⁺ 内流 → 去极化 → 电信号传出，这就是你能感觉到压力的机制，机械门控通道广泛用于触觉、听觉、张力感知等系统。机械门控通道和配体门控通道在信号链条中的定位是类似的，都是前置通道，负责把外部信号（物理或化学）转化为膜电位变化，从而间接触发电压门控通道，引发动作电位。
单通道电流细胞膜上的每个离子通道就像一个“开关门”，当这个门打开时，会有离子流进或流出，形成瞬时电流，通常以 pA（皮安）为单位。这些电流就叫“单通道电流”（unitary current），因为它们是由单个通道的开闭活动造成的。在膜片钳实验中，离子通道开放时会产生离子流动，形成可记录的电流信号，电流单位为皮安（pA，1pA &#x3D; 10⁻¹² A），代表单位时间内通过的电荷量；实验中常用的膜电位单位为毫伏（mV，1mV &#x3D; 10⁻³ V），表示膜内外之间的电位差，驱动离子跨膜流动。通过调节膜电位（mV）并记录相应电流（pA），可以用欧姆定律表达通道的电流行为：$$I &#x3D; γ × (V - Eₖ)$$其中 I 为电流（pA）、γ 为通道电导（pS，1pS &#x3D; 10⁻¹² S）、V 为施加电压（mV）、Eₖ 为离子的平衡电位（mV）。电压提供驱动力，电流反映流量，两者共同描述离子通道的电生理特性。
Nernst方程与非线性电流-电压关系在细胞膜两侧，如果细胞膜对某种离子通透，且该离子在膜两侧浓度不同，那么它就会从高浓度向低浓度流动，这个流动过程中会带电荷穿过膜，最终造成膜两侧的电荷不均衡，也就形成了电位差。，这种电位差可以通过 Nernst 方程计算。以钾离子（K⁺）为例，其平衡电位为：$$E_K &#x3D; \frac{RT}{zF} \ln \left( \frac{[K^+]\text{out}}{[K^+]\text{in}} \right)$$，其中 R 为气体常数，T 为热力学温度，F 为法拉第常数，z 为离子的电荷数（K⁺ 为 1）。在 20℃ 条件下，RT&#x2F;F 约为 25mV，公式可简化为：$$E_K \approx 58 \log_{10} \left( \frac{[K^+]\text{out}}{[K^+]\text{in}} \right)$$Nernst 方程本质上是在描述离子“想要流动”的驱动力，其对数形式来源于能量守恒原理，因为离子从高浓度向低浓度移动的过程是化学势能的变化过程，对数函数才能准确反映这种能量变化。实际的离子电流和电压之间并非线性关系。当膜电位偏离离子的平衡电位越远，离子流动的速率越快，表现为电流增加更迅速，呈现出非线性特征。此外，不同的离子通道具有方向选择性，有些通道只允许离子向一个方向流动，因此电压-电流曲线往往呈曲线状而非直线，这种非线性本质上反映了电驱动力与通道性质共同作用下的结果。
离子如何穿过通道离子穿越细胞膜通常依赖特定的蛋白质通道，这些通道结构类似”充满水的孔洞”，被称为扩散通道或水通道。由于离子带电，它们在水中常被水分子包围形成”水合层”，呈现出一个带壳的”水球”状态。当离子试图进入通道时，必须脱去这层水合层才能通过，而这个脱水过程需要耗能，因此显著影响了通道对离子的选择性。通道的选择性主要来源于其内部原子或电荷的空间排布，若这种结构能够模拟离子在水中所处的稳定状态，就更容易吸引目标离子进入通道。在动力学层面，离子通过通道的速率可以用”Eyring反应率理论”建模，即类比为化学反应中穿越能量屏障的过程，膜电位所产生的电场则会影响这一能垒的高低，从而调节通行速率。实验上，为了量化通道的导通能力，通常测量所谓的”斜率电导”，即电流随电压的变化率。
氨基酸残基决定了离子通道的选择性与电导率氨基酸是构成蛋白质的基本单元，每个氨基酸都具有统一的骨架结构，其中包括一个氨基（NH₂）和一个羧(suō)基（COOH），此外还含有一段具有差异性的侧链。正是这些不同的侧链，赋予了每种氨基酸独特的理化性质，如带正电、带负电、亲水或疏水等特征。在蛋白质形成的过程中，多个氨基酸通过脱水缩合连接成链，连接后的氨基酸失去了完整结构中的部分基团，仅保留其在蛋白质链中的”部分结构”，这一部分即称为”氨基酸残基”。因此，氨基酸残基指的是蛋白质链中每一个被拼接在一起的氨基酸单元，其侧链特性仍被完整保留，并对整个蛋白质的结构和功能起决定性作用。离子通道是细胞膜上的一类跨膜蛋白，其基本结构是由多个亚基围绕中心排列，形成一个可供离子通过的孔道。该孔道的内壁由氨基酸残基构成，决定了通道的选择性和电导能力。所谓离子选择性，是指通道只允许特定类型的离子通过，例如只允许正电荷的钠离子（Na⁺）或负电荷的氯离子（Cl⁻）通行。而电导率则衡量单位时间内通过的离子数量。在经典研究中，科学家发现某些位置的氨基酸残基对通道功能具有决定性影响，尤其是通道中心轴线上的 -1’、2’、13’ 和 20’ 位点。例如，当这些位置为谷氨酸（Glu）或天冬氨酸（Asp）等带负电残基时，能够吸引并促进正电荷离子如Na⁺通过；而当这些位置是精氨酸（Arg）或赖氨酸（Lys）等带正电残基时，则倾向于吸引Cl⁻等负电荷离子。由于这些氨基酸侧链的电荷状态与空间分布直接决定了通道内的电场环境，因此成为影响离子通透性与选择性的关键因素。不同通道的选择性与其氨基酸残基构成密切相关，例如5-HT₃A通道由于在M4区域拥有多个正电的精氨酸残基，因此表现出显著高的离子电导性。这类精密调控机制使得每种离子通道在细胞电信号传导中具有高度的专一性和方向性，体现了蛋白质结构与功能之间的紧密联系。
通道的分类和作用离子通道按照激活方式可分为两大类：配体门控通道（Ligand-gated ion channels）和电压门控通道（Voltage-gated ion channels）。前者由配体（如神经递质或药物）与通道上的受体结合，引发构象变化从而开启通道，常见的包括乙酰胆碱受体（nAChR）、GABA-A 受体和5-HT3 通道。后者则响应膜电位变化而开启，包括钠通道、钾通道、钙通道和氯通道等，广泛参与动作电位的生成、神经递质释放以及膜电位的复原。这些电压门控通道结构各异但同属一个进化上的超家族，其中电压门控钠通道由四个结构域组成，每个结构域包含6个跨膜螺旋，S4 区段负责感应电压，S5~S6 构成离子通道孔。电压门控钾通道结构更为灵活，由4个亚基（亚基是由大量氨基酸残基组成的完整蛋白结构单位，而残基是亚基的基本构建单元）组成，每个亚基包含6段跨膜螺旋，整体构成类似Shaker模型。它主要功能是协助神经元从去极化状态复极回到静息，并调节信号的频率和强度。当局部去极化达到阈值后，钠通道首先开放，引发动作电位，并迅速进入失活状态，此时即使电压仍高也不会再次导通，从而进入绝对不应期；随后钾通道开放，钾离子外流，帮助膜电位恢复。S4 电压感受区在膜电位变化中起核心作用，像活塞一样推动结构变化并控制通道启闭。整个过程中，电压门控通道通过激活-失活机制确保动作电位的单向传导和时间控制，防止过度兴奋，是神经信号精确传播的基础。
离子通道的多样性在神经系统中，离子通道的种类远不止经典的钠、钾、钙和氯通道。许多具有独特结构和激活机制的非典型离子通道同样发挥着关键作用。根据其激活方式（如配体结合、电压变化、第二信使作用等）、通透离子种类以及亚基组成的不同，这些通道可被划分为多个功能类别，广泛参与突触传递、感觉调控、神经节律维持以及细胞内稳态调节。例如，谷氨酸受体通道是兴奋性突触传递的核心，由 NMDA、AMPA 和 Kainate 三类配体门控通道组成，均可被谷氨酸激活，引发 Na⁺ 和 Ca²⁺ 的流入。其中 NMDA 通道具有电压依赖性，需膜去极化解除 Mg²⁺ 阻塞后才能开放；而 AMPA 和 Kainate 通道仅依赖配体激活。它们分别由 GluN、GluA、GluK 亚基构成，对应 GRIN、GRIA 和 GRIK 基因家族。此外，ATP激活的 P2X 通道是另一类重要的配体门控阳离子通道，主要由 ATP 激活的三聚体结构组成，介导 Na⁺ 和 Ca²⁺ 的流入，参与炎症、痛觉等生理反应。其成员包括 P2X1 至 P2X7 七种亚型，与之相对的 P2Y 受体虽也结合 ATP，却属于 G 蛋白偶联受体，不直接构成通道。还有一类重要的感知相关通道是环核苷酸门控通道（CNG），其通过感应细胞内的 cAMP 或 cGMP 启动，广泛分布于视杆细胞、视锥细胞及嗅觉神经元。CNG 通道由 CNGA 和 CNGB 亚基组成，允许 Na⁺ 与 Ca²⁺ 进入细胞，在视觉与嗅觉信号的转导中扮演关键角色。它不响应电压或神经递质，属于独立类别的环核苷酸门控通道，不归入传统的电压门控通道（VGIC）或配体门控通道（LGIC）范畴。这些多样的通道系统共同构成了神经信息处理的复杂调控网络。
RNA在细胞中，RNA（核糖核酸）是介于DNA与蛋白质之间的中间信息载体，主要由DNA转录生成，用于指导蛋白质的合成。其中的mRNA（信使RNA）携带基因编码信息，是蛋白质翻译的直接模板。在神经系统中，mRNA并非一成不变，细胞可通过RNA编辑对其特定位点进行碱基修饰，从而改变翻译出的蛋白质结构与功能，而无需修改DNA本身。这种编辑方式通常发生在特定位点上，例如将腺嘌呤（A）修改为肌苷酸（I），翻译时肌苷被识别为鸟嘌呤（G），进而改变蛋白的氨基酸序列与功能构型。以谷氨酸受体GluA2为例，其RNA编辑位点控制着通道对钙离子的通透性，未编辑的版本允许Ca²⁺通过，编辑后的版本则阻止Ca²⁺通道开放，显著改变突触传递的安全性与神经可塑性。RNA编辑机制体现了神经系统对通道蛋白功能的高度可调控能力，是在不改写基因序列的前提下，灵活控制通道选择性、门控速度、激活阈值等关键生理特性的分子基础。
亚基多样性与RNA编辑：通道功能的可调性基础离子通道蛋白的功能不仅取决于类型，还受基因表达的剪接、mRNA 编辑等调控机制的影响。谷氨酸受体亚基（如 GluA2）的 RNA 编辑会显著改变钙通透性；GluR6 的 RNA 编辑影响其门控速度和激活特性。这一机制不属于通道类型本身，而是对通道蛋白功能的遗传和翻译层级的调控方式，反映了神经系统在功能调节上的高度可塑性。
电压门控钠通道（NaV）失活机制电压门控钠通道（NaV）在动作电位的触发与单向传播中发挥核心作用，其功能依赖于精确协调的激活与失活机制。当膜电位去极化至阈值（约 -55 mV）时，NaV 通道迅速开放，允许大量 Na⁺ 沿电化学梯度进入细胞，引发膜电位快速上升。这一开放状态极为短暂，通常仅维持 1 至 2 毫秒，在这极短时间内，钠离子内流可将膜电位从静息状态下的 -70 mV 提升至动作电位峰值，通常约为 +30 mV，构成去极化相中最主要的电荷变化来源。钠通道在激活后1~2ms内便进入失活状态，即使膜电位仍维持在高位，也不再导通 Na⁺。这种失活属于时间驱动的构象变化，由通道蛋白 III–IV 结构域之间的“失活门”（分子级别的塞子，直接把通道的内侧孔口堵住了，使 Na⁺ 无法再流入细胞）实现，该区域含有典型的 IFM（异亮氨酸-苯丙氨酸-甲硫氨酸）基序，可在通道开放后迅速插入孔口，物理性阻断离子通过。失活状态需待膜电位复极并使通道复位后才可解除，是动作电位绝对不应期的分子基础，保障了信号的不可逆性与单向传播。NaV 通道还存在“慢失活”机制，常见于持续去极化或重复放电过程中，参与调节神经元兴奋性的适应性变化。整体来看，钠通道极短暂的开放时间和紧随其后的自动失活过程，共同塑造了动作电位的时序精准与放电节律，是高保真神经传导的基本保障。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>视网膜</tag>
        <tag>神经网络</tag>
        <tag>离子通道</tag>
      </tags>
  </entry>
  <entry>
    <title>支付宝账务热点架构解决方案</title>
    <url>/2025/04/18/%E6%94%AF%E4%BB%98%E5%AE%9D%E8%B4%A6%E5%8A%A1%E7%83%AD%E7%82%B9%E6%9E%B6%E6%9E%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[背景2021年 5 月份的时候，我师兄告诉我，希望由我牵头为深圳国际支付团队做出一些技术上的改变和创新，思来想去，最终我们将目标聚焦到了国际账务系统的账务热点难题上。首先是出于业务层面的考虑，记账操作作为金融业务最核心，同时也是最基础的一项工作，如果能够在确保交易稳定性的同时又大幅度提升交易频率，这对研发团队和用户来讲都无疑是一件双赢的事情；其次，主站的账务团队在这方面已经积累了足够丰富经验，并且最终方案也成功通过了双 11 的终极大考。所以最终由我负责牵头国际账务团队，拜访了主站的账务团队，以及 Maxwell 时序计算引擎团队的相关负责人和核心同学，针对账务热点的解决方案展开了深入讨论，并希望能够借此机会完成对国际账务系统的架构进化。
传统实时记账面临的挑战在正式开始本文之前，我们需要先了解一个事实，尽管 Alipay（支付宝）的全站峰值交易笔数可以达到惊人的 25w&#x2F;s（2017 年的公开数据），但在传统的同步实时记账模式下，Alipay 单账户的交易笔数最多只能做到几十+&#x2F;s，也就是说，单账户的交易笔数上限存在着严重的性能瓶颈，在务必优先确保记账准确性的前提下，这是一个世界级的难题，优化谈何容易。或许有些同学会感到不可思议，支付操作不就是简单的扣钱、加钱操作吗，为什么会导致这么低的吞吐量？在此大家需要注意，金融类业务，无论是流入、还是流出场景，都存在着一个最基础，同时也是最核心的工作，那就是记账。记账的本质除了需要实时反应账户余额的变化外，还需要满足来自上游的一些对账要求，以及会计层面提出的诸多要求。因此，在一笔交易的背后，账务系统除了需要更新目标账户余额数据外，还需要记录大量的额外信息。也就是说，一次记账操作，账务系统会在一个事务中同步执行几十条已经优化到极致的 SQL 语句，期间必然会伴随大量的网络 I&#x2F;O、磁盘 I&#x2F;O 等资源开销，并且为了确保记账操作的准确性，还必须对目标账户显式加上行锁（for update）。这样一来，在双 11 等高频交易场景下，活动力度大的商户账户就一定会成为热点账户，如图 1 所示，由于单位时间内账务系统只会处理目标账户的一个记账请求，而其它上游的应用层线程因为拿不到 DB 的行锁只能被迫选择长时间等待，RT 时间被放大，严重影响系统整体的 TPS 和用户支付体验，甚至还有可能导致系统出现雪崩。抛开技术层面的问题来看，单纯讨论业务层面记账语义的复杂度也足以让人望而生畏。比如 UserA 向 UserB 转账 50 元，最终 UserA 的账户余额会减少 50 元，而 UserB 的账户余额会相应的增加 50 元，由于不同的用户账户信息可能会被落盘到不同的存储系统上，因此如果要确保分布式数据的一致性，就必须启用分布式事务，出于性能方面的考虑，在基于 TCC 的柔性事务中，我们需要考虑和解决诸如：幂等、事务悬挂、空回滚等一系列复杂问题，稍有差池就会影响记账操作的准确性，引发资损问题。如图 2 所示，在 Prepare 阶段的时候，账务系统并不会直接对用户账户余额进行实际的资金操作，而是先对目标账户的余额、状态进行 check，然后触发资金冻结流程，记录冻结金额和未到账金额，也就是说，Prepare 阶段的主要任务就是负责基础的资源预留；当顺利进入到 Confirm 阶段后，账务系统才会根据冻结表中记录的冻结资金来发起实际的账户余额变更，以及记录账务明细（比如:记账发生额、记账后余额等）和日终余额等数据；如果 Prepare 阶段执行失败，便会进入到 Cancle 阶段，Cancle 阶段的主要任务就是回滚 Prepare 阶段的分支事务，本质上就是删除冻结表中的冻结资金记录。
常规解决方案为了解决双 11 等大促场景下单账户高频交易存在的性能问题，市面上也诞生出了诸多解决方案，比如拆分子账户、流控限制、汇总明细记账、缓冲记账等，但这些解决方案都是相对有损的，并没有从根本上解决问题。我们先来看看拆分子账户方案，简单来说，就是将热点账户拆分打散成多个子账户，以便于让记账流量均匀分布到各个子账户上，以此来提升记账效率，如图 3 所示。虽然每一个子账户在物理上都是相互独立的，但从逻辑上来看仍然是一个整体。子账户最大的问题就是实现难度大，流出类场景要考虑到某个子账户余额不够时，多子账户合并扣款等复杂操作，记得当初在云集的时候，针对爆款商品的库存扣减操作我们就采用过类似的解决方案，只是在灰度环境下验证未达预期，最终只好回滚了此方案。而流控方案就不过多解释了，高频交易场景下带来的用户体验是非常糟糕的。而汇总明细记账和缓冲记账是业界采用得最多的 2 种账务热点解决方案，算是一种在效率和准确性、稳定性之间换取平衡的准实时记账手段。当采用汇总明细记账时，账务系统只会落明细数据，也就是说，只会负责执行 INSERT 语句的插入，而不会锁账户（FOR UPDATE）去更新余额，最终会通过一个定时任务来对明细数据 SUM 汇总后完成对指定账户余额的更新，如图 4 所示。缓冲记账方案的思路就是将记账请求写入消息队列进行消峰处理，然后立即给上游返回 SUCCESS，待消费端根据后端的处理能力依次消费完成记账操作，如图 5 所示。在此大家需要注意，尽管汇总明细记账和缓冲记账都是准实时的记账操作，但却并不适用于所有场景。换句话说，这 2 个方案更多是应用在大商户（热点账户）的收单场景上，并且在活动开始前需要运营和研发同学提前配置热点账户，一但期间出现漏配、误配，那么仍然会产生热点问题；其次，记账操作由于会存在一定的数据延迟，所导致的直接后果就是商户无法实时看见余额的变更，这一点需要提前和商户沟通清楚；然而最严重的是，流出类业务在这种情况下必然会产生透支问题继而引发资损风险，因为账务系统在记账时并没有及时校验账户余额，只能在后续补账时发现。
Alipay 的解决方案账务热点的核心问题就是对账户执行频繁的加&#x2F;解锁操作导致的应用层线程大量 hang 住，并且事务的执行时间较长(在最坏的情况下，一个事务的 RT 时间可能会达到秒级)，严重拖垮了全链路的支付效率。如图 6 所示，在一次记账事务中，业务层面首先会对目标账户显示加行锁(FOR UPDATE)，基于 DB 的事务隔离策略，其它未拿到锁的事务则需要执行等待，而成功获取到锁的事务在执行期间，由于业务特性必然会导致产生大量的网络 I&#x2F;O 请求和磁盘 I&#x2F;O 请求，这些都是影响支付 RT 的关键因素。那么我们的核心改造点就主要集中在如下 2 点进行发力：

去锁化；
降低网络和磁盘 I&#x2F;O 消耗；

以上改造点，如果是基于传统的 RDBMS 存储来实现几乎是不可能的，因此只能选择另辟蹊跷。2017 年我在设计云集的交易系统时，针对爆款商品的库存扣减其实也遇到了类似的问题，瓶颈点都是热点写，当时我们采用的解决方案就是将库存库从原先的 Mysql 切换为 Redis，同时开启 AOF&#x2F;RDB 来解决数据容灾问题，至于容错方面则是通过搭建 Cluster、配置参数 cluster-require-full-coverage(不足 16384 个 slot 时 Cluster 仍可对外提供服务)，以及控制最大内存等策略(哪怕 M&#x2F;S 宕机也仅仅只是影响极小一部分数据区间不可用)等来提供支撑。而业务层面我们则选择在 Redis 中嵌入一套具备库存业务语义的 Lua 脚本（包括：获取库存、库存的记增、记减等），然后基于 Redis 自身的原子性来实现爆款商品的热点写优化。只是对于 Alipay 而言，之所以不采用 Redis 作为主力账务库，除了需要考虑极其严苛的稳定性因素外，更重要的是 Redis 在处理账务系统复杂的业务逻辑编排时成本较高。电商类场景和金融类场景所面临的问题维度和矛盾点不同，不可相提并论，但是它们的解决思路却天然存在着一定的相似性，这一点毋庸置疑。而 Alipay 的最终解决方案就是自研一套账务库，并同时满足金融场景下所需的稳定性、高性能、原子性，以及支持嵌入“逻辑脚本”来实现业务功能的扩展，如图 7 所示。看到这里，相信大家脑海中已经有思路了，其实核心的改造方案就是把基础的记账语义(包括但不限于：账户余额记增&#x2F;记减、金额的冻结&#x2F;解冻等)从账务系统中抽象出来，嵌入到一个支持原子操作的存储系统中，实现目标账户的去锁化，这关键的一步操作将会减少大量的应用层线程排队；然后再将记账语义 API 暴露给上游调用来减少 I&#x2F;O 层面所带来的资源消耗。相对于传统实时记账的 I&#x2F;O 密集型操作而言，由于基础的记账语义被打包成了一条命令(由存储系统负责将业务指令转换为相应的计算指令)，因此在记账时上游主动触发的 I&#x2F;O 请求将会有明显下降，从而换来的是大幅度的支付效率提升。Alipay 账务系统改造方案中所使用的账务库便是主站高性能团队为其量身定制的高性能时序计算引擎 Maxwell，如图 8 所示。
容灾&#x2F;容错处理目前 Alipay 并不会把所有的记账逻辑都迁移到 Maxwell 中，仅仅只是把基础的记账语义迁移到 Maxwell 中，哪个是主要矛盾就优先解决哪一个，因此其它的账务逻辑仍然是保持原有流程不变。出于对容错&#x2F;容灾层面的考虑，Maxwell 中的余额数据在变更成功后会立即同步回 OceanBase 做结果备份，期间哪怕是 Maxwell 宕机，业务层面也能够通过开关快速切换回原有逻辑。如图 9 所示，Maxwell 和 OceanBase 异构系统之间的数据一致性则是通过 TCC 柔性事务来保证。在 Prepare 阶段的时候，账务系统并不会直接对用户账户余额进行实际的资金操作，而是先对 Maxwell 中目标账户的余额、状态进行 check，然后触发资金冻结流程，记录冻结金额和未到账金额，并同步写回 OceanBase 进行结果备份；当顺利进入到 Confirm 阶段后，账务系统才会根据冻结表中记录的冻结资金来发起实际的账户余额变更，并同步写回 OceanBase 进行结果备份，以及记录账务明细（比如:记账发生额、记账后余额等）和日终余额等数据；如果 Prepare 阶段执行失败，便会进入到 Cancle 阶段，Cancle 阶段的主要任务就是回滚 Prepare 阶段的分支事务，本质上就是删除冻结表中的冻结资金记录。或许有些同学会存在疑问，为什么不把所有的记账逻辑都迁移到 Maxwell 中？基于目前的改造方案，单账户至少在很长一段时间内都不会再出现热点问题，至于未来，再看。
后记关于 Alipay 账务热点架构解决方案就讲到这里，感兴趣的同学可以参考其他相关文献资料。如果在阅读过程中有任何疑问，欢迎在评论区留言参与讨论。
]]></content>
      <categories>
        <category>系统架构</category>
      </categories>
      <tags>
        <tag>架构设计</tag>
        <tag>账务热点</tag>
        <tag>分布式</tag>
      </tags>
  </entry>
  <entry>
    <title>动作电位去极化与复极化的离子基础</title>
    <url>/2025/07/19/%E5%8A%A8%E4%BD%9C%E7%94%B5%E4%BD%8D%E5%8E%BB%E6%9E%81%E5%8C%96%E4%B8%8E%E5%A4%8D%E6%9E%81%E5%8C%96%E7%9A%84%E7%A6%BB%E5%AD%90%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[
前言研究者通过测量膜电流的方法，已能够定量描述动作电位发生时的离子机制。通过这些测量，可以确认电流是由哪些离子流动引起的，并推断出这些离子跨膜电导变化的幅度和时间顺序。实验发现，去极化会迅速增加钠电导，同时也会略微增加钾电导。钠电导的增加具有瞬时和暂时的特性，而钾电导则持续增加并维持较长时间。钠和钾电导的变化顺序和幅度决定了动作电位的形成过程。动作电位的恢复过程，即复极阶段，与多种钾通道的激活有关。动作电位之后还会出现持续的电导变化，称为后电位，可能表现为超极化或去极化状态。
后电位现象解析在一次动作电位结束之后，膜电位并不会立即稳定回到静息电位，而是会经历一段短暂的偏移过程，这种偏移被称为后电位（afterpotential）。后电位不是新的动作电位，而是前一次动作电位所激活的离子通道未立即关闭所造成的持续电导变化。根据偏移方向的不同，后电位可以表现为后超极化（afterhyperpolarization, AHP）或后去极化（afterdepolarization, ADP）。后超极化指膜电位短暂地变得比静息电位更负，主要由钾通道持续开放导致钾离子继续外流所致。后去极化则指膜电位变得比静息电位更正，可能是因为钠或钙离子的残余内流、钾外流减弱，或其他通道介导的小电流引起。这些后电位在持续时间上远短于动作电位本身，通常仅持续数毫秒至数十毫秒不等。虽然后电位是动作电位之后的被动电生理现象，但它对神经元的兴奋性具有重要影响。超极化的后电位会抬高再次触发动作电位所需的阈值，使神经元进入不应期或降低兴奋性；而去极化的后电位则可能降低阈值，甚至在一定条件下促进重复放电。值得强调的是，不论后电位如何波动，膜电位最终都将恢复到静息电位。这是因为细胞具有稳定膜电位的机制，包括钠钾泵的持续工作和钾漏通道的维持作用。这种恢复确保了神经元具备随时响应下一次刺激的能力，保证神经系统信息传递的连续性和稳定性。
钾漏通道与电压门控钾通道的区别与协同在神经元膜上，钾离子的跨膜流动对维持静息电位和调控动作电位起着核心作用。参与这些过程的钾通道并非单一类型，而是包括多种功能和激活机制不同的通道，主要可分为钾漏通道与电压门控钾通道两大类。这两类通道在神经电活动中的分工明确、协同紧密，构成了神经元电生理功能的基本框架。钾漏通道（potassium leak channel）是一类在静息状态下始终开放的钾通道。它不受膜电位变化的调控，也无激活或失活机制。由于细胞内钾浓度远高于细胞外，钾离子通过钾漏通道持续向外流动，带出正电荷，从而使膜内逐渐变负。该过程持续进行，直到钾离子的外流趋势与负电位吸引作用达到平衡，此时膜电位稳定在一个负值，称为静息膜电位，通常约为 -70 mV。钾漏通道的通透性在静息状态下显著高于钠通道，因此静息膜电位接近钾的平衡电位。尽管钠钾泵（Na⁺&#x2F;K⁺-ATPase）维持了细胞内外的浓度梯度，但真正决定膜电位静态数值的，是钾漏通道所主导的被动离子分布。钾漏通道构成了神经元电稳定性的基础，对神经信号的响应阈值也具有持续性影响。电压门控钾通道（voltage-gated potassium channel）是一类对膜电位变化高度敏感的钾通道。当膜电位去极化超过一定阈值时，这类通道迅速开启，允许大量钾离子从细胞内流向细胞外。钾离子的迅速外流带出大量正电荷，使膜电位从正值回落至负值，即完成复极化过程。这些通道在动作电位的后期发挥主导作用，是神经元恢复电稳定状态的关键。电压门控钾通道具有激活与失活机制，响应速度快，在动作电位后期短暂开放，随后关闭，避免过度钾外流。常见的通道包括 Kv 家族（如 Kv1.1、Kv2.1 等）以及参与后超极化的钙激活钾通道（如 BK 通道等）。这些通道不在静息状态下工作，仅在动作电位期间被电压激活。钾漏通道与电压门控钾通道并不冲突，而是在不同生理阶段承担不同角色。在静息状态下，仅有钾漏通道开放，持续缓慢地外流钾离子，维持膜内负电位的稳定。当动作电位发生时，钠通道瞬时开启导致去极化，此时仅靠钾漏通道的钾外流已不足以迅速复极，因此电压门控钾通道会被激活，大量钾离子迅速外流，从而使膜电位恢复为负值，使神经元迅速脱离激发状态。待动作电位结束后，电压门控钾通道失活关闭，膜电位可能进入后超极化或去极化状态，此时，钾漏通道与钠钾泵共同协作，持续推动膜电位向静息水平回归。整个动作电位的兴奋-复极-恢复循环，并非由单一通道控制完成，而是多类离子通道在不同时间点根据膜电位变化作出动态响应的结果。正是这套钾通道之间的协同调控机制，构成了神经元高效、稳定处理信息的生理基础。
钠通道的失活机制与动作电位不应期的本质在动作电位的上升相中，钠通道起到了主导作用。当膜电位快速去极化达到阈值时，电压门控钠通道迅速打开，大量钠离子进入细胞，导致膜电位进一步升高。然而，钠通道并不会在开启状态下持续导通，而是在激活后极短时间内迅速转入失活状态。处于失活状态的钠通道即使面对持续的去极化，也无法再次开放，钠电流因此终止。Hodgkin 和 Huxley 通过一系列前脉冲实验揭示了钠通道失活的规律。他们在实验中先将膜电位预先钳制在不同水平，随后施加测试刺激，观察是否还能诱发钠电流。如果前脉冲电压较高，例如 -21 mV，再给予进一步去极化时，钠电流显著减弱，说明钠通道已在前脉冲阶段失活，无法被重新激活。反之，如果前脉冲电压较负，例如 -85 mV，在其他条件相同的情况下，钠电流可以重新出现，说明钠通道已从失活状态恢复。由此可见，钠通道从失活状态恢复的程度与2个因素有关：一是膜电位是否足够负，二是保持该电位的持续时间是否足够长。钠通道的恢复过程可以从分子构象角度进行理解。通道蛋白在失活状态下处于一种稳定但非导通的构象，仅当膜电位回落到接近静息电位水平时，这种构象才有可能恢复为可激活状态。膜电位越负，越接近钠通道的复位条件；持续时间越长，恢复的可能性越高。因此，在去极化尚未充分解除的状态下，大多数钠通道仍处于失活状态，无法响应新的刺激。这一特性构成了神经元动作电位之后的绝对不应期。在绝对不应期内，无论刺激多强，动作电位都无法再次被触发。随着膜电位逐渐恢复到静息状态，部分钠通道开始从失活状态中恢复，神经元进入相对不应期，此时需要较强刺激才能重新激发动作电位。这一机制不仅保证了神经冲动的单向传播，还为神经系统设定了放电频率的上限，避免了神经元不受控的重复放电。钠通道的快速失活和电压依赖性的恢复过程，是神经电生理中极为重要的一环。它为动作电位的结束和下一次放电之间划定了明确的时空界限，是神经元精确调控兴奋性和信息节律的关键机制。
钙型动作电位在大多数神经元中，动作电位的产生主要依赖于电压门控钠通道的快速开放。钠通道激活后，大量Na⁺进入细胞，使膜电位迅速从负值跃升为正值，形成典型的钠型动作电位。然而，在一些特定细胞中，钙离子也能够触发动作电位。在心肌细胞、丘脑神经元、脑干神经元和部分内分泌细胞中，细胞膜上表达的主要是电压门控钙通道。钙通道激活后，Ca²⁺的内流可以替代钠离子完成去极化，形成钙型动作电位。虽然钙离子的流速较钠慢，但由于其浓度梯度更陡且携带双价正电荷，钙通道的开放依然能驱动膜电位上升至阈值并完成动作电位。钠型动作电位和钙型动作电位在特征上存在差异。钠型动作电位的上升斜率陡峭，持续时间通常为几毫秒，适用于快速信号传导。钙型动作电位上升较平缓，持续时间可以达到数十至上百毫秒，更适合节律性兴奋和信号整合。钙通道的主导作用使这些细胞的动作电位具有更长的持续时间和不同的生理功能。钙离子在兴奋过程中还发挥调控作用。钙内流可以激活小电导钾通道（SK通道），延长后超极化时间。钙还可通过激活钙调蛋白、蛋白激酶等信号通路，调节神经元的兴奋阈值、适应性放电模式以及突触释放的效率。这些功能使钙不仅是去极化的驱动力，还是细胞信号调节的重要介质。钙离子的电化学驱动力非常强大。细胞外钙浓度比细胞内高出约万倍，这种陡峭的浓度梯度与双价正电荷的结合，使钙在通道开放时产生显著的膜电位变化。在缺乏钠通道或钠通道数量较少的细胞中，钙内流完全能够替代钠完成动作电位的上升过程。综上所述，钠通道是多数神经元中动作电位的核心驱动力，但钙通道在特定细胞中能够独立触发动作电位并承担信号整合功能。钙的作用不仅限于辅助兴奋，它还是调节细胞兴奋性、信号传递和电活动时序的关键因素。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
        <tag>离子通道</tag>
        <tag>去极化</tag>
        <tag>复极化</tag>
      </tags>
  </entry>
  <entry>
    <title>神经元之间的信号传导</title>
    <url>/2025/05/21/%E7%A5%9E%E7%BB%8F%E5%85%83%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BF%A1%E5%8F%B7%E4%BC%A0%E5%AF%BC/</url>
    <content><![CDATA[
突触的结构与信号传导神经元之间的信号传导依赖于一个高度精密的物理接口——突触（Synapse）。典型的突触结构由突触前膜、突触间隙和突触后膜3部分构成。其中，突触前膜实际上是上一个神经元的轴突末梢膜，负责储存并释放神经递质；突触间隙是连接两个神经元之间的微小空间，神经递质会在其中扩散；突触后膜则位于下一个神经元的树突膜上，表面分布着高度特异性的受体（Receptor），专门用于识别和接收这些神经递质。在神经元内部的电传导过程中，当动作电位到达突触前膜时，会触发钙离子通道开放，钙离子（Ca²⁺）流入细胞内。钙离子的内流是一个关键信号，它促使突触前膜内的突触小泡（Synaptic Vesicles）与细胞膜融合。随后，储存在突触小泡中的神经递质分子被释放到突触间隙中，并迅速扩散至突触后膜，与受体结合，引发突触后神经元的电位变化，进而可能触发新的动作电位，完成信号在神经元之间的传导。这一过程构成了从”电信号 → 化学信号 → 电信号”的完整转换链，是神经系统高效运作的基础机制。此外，突触不仅是信号传导的关键节点，也常常是多种药物的作用靶点，许多神经系统相关的治疗手段正是基于对突触机制的精准调控。神经元之间的信号传导方式主要包括2种：化学突触（Chemical Synapse）和电突触（Electrical Synapse）。其中，化学突触是最常见的传导形式，占据了神经系统中超过 99% 的突触类型。在这种方式中，突触前神经元通过释放神经递质，将信号以化学形式传递给突触后神经元，是我们在感知、运动、情绪等大多数神经活动中所依赖的基本机制。相比之下，电突触在哺乳动物中极为罕见，仅存在于某些对传递速度要求极高的特殊神经回路中，主要分布于脑干、视网膜等区域。在这类电突触中，两个神经元之间通过缝隙连接（gap junction）直接传递电流，无需神经递质介导，因此传导速度更快，但调控能力较弱。这类结构常见于无脊椎动物的神经系统，在人类等哺乳动物中则参与如：眨眼反射、惊跳反射、平衡调节、快速眼动(REM)等快速、同步性强的反应通路。电突触与化学突触协同构成了神经系统内部高效而精密的信息传导网络。
神经递质的类型在神经系统中，神经递质是神经元之间进行信息传递的关键化学递质。根据它们对突触后神经元产生的效应，通常可以分为2大类：兴奋性神经递质和抑制性神经递质。中枢神经系统中最主要的兴奋性神经递质是谷氨酸（Glutamate），它在大脑中广泛分布，参与学习、记忆等多种高级认知功能。除了谷氨酸外，一些具有调节功能的神经递质如：去甲肾上腺素和多巴胺，也可在特定通路中产生兴奋效应，主要用于调控注意力、动机与奖赏等神经功能。常见兴奋性神经递质：



类型
神经递质分子
作用类型
主要受体
分布与功能



兴奋性
谷氨酸 Glutamate
兴奋
AMPA, NMDA, kainate
中枢神经系统最主要的兴奋性递质


兴奋性
乙酰胆碱 ACh
兴奋或抑制
烟碱型（兴奋）, 毒蕈型（抑制）
在神经肌肉接头处负责兴奋传导


兴奋性
去甲肾上腺素 NE
主调制
α、β肾上腺素受体
注意力、唤醒、应激


兴奋性
多巴胺 DA
主调制
D1-D5 受体
奖赏、运动、精神调节


与之相对，抑制性神经递质会使突触后膜发生复极化，即膜电位变得更加负，从而降低神经元触发动作电位的可能性。它们通常通过开放氯离子（Cl⁻）通道或促进钾离子（K⁺）外流来实现抑制效果。典型的抑制性神经递质包括GABA（γ-氨基丁酸），它是中枢神经系统中最主要的抑制性递质，负责调控整体神经兴奋性；还有甘氨酸（Glycine），主要存在于脊髓和脑干，参与运动反射和感觉信号的调控。常见抑制性神经递质：



类型
神经递质分子
作用类型
主要受体
分布与功能



抑制性
GABA
抑制
GABA-A（Cl⁻通道）, GABA-B（代谢型）
中枢神经系统主要抑制性递质


抑制性
甘氨酸 Glycine
抑制
GlyR（Cl⁻通道）
脊髓和脑干中的主要抑制递质


不同类型的神经递质的作用在典型的神经信号传导过程中，动作电位并不是由突触前神经元直接”传过去”的电信号触发，而是依赖于神经递质。这个过程的关键在于：突触前神经元释放的神经递质类型决定了突触后膜的电位变化方向，从而影响动作电位是否能够被触发。当一个神经元接收到兴奋性神经递质（如：谷氨酸）时，这些递质会与突触后膜上的配体门控阳离子通道结合，导致 Na⁺ 或 Ca²⁺ 等阳离子流入，从而引发局部膜电位的去极化，即形成兴奋性突触后电位（EPSP）。但这种电位变化是局部且被动的，它会以衰减的方式向轴丘扩散，而不会立即引发动作电位。轴丘是神经元的”决策中枢”，密布着大量的电压门控型钠通道，只有当电差累计到阈值电位（通常约为 -55 mV）时，这些钠通道才会被激活，引发大量 Na⁺ 内流，从而产生一个完整的动作电位（从阈值电位（通常为 –55 mV）迅速上升到正值（约 +30 mV），再通过复极化与超极化过程回落到静息电位（约 –70 mV）的完整电位变化过程）。动作电位一旦启动，就会以”全或无”的方式沿轴突传导至突触末梢。需要注意的是，这个放电之后的膜电位恢复过程（复极化），会导致钾离子（K⁺）外流，但它并不是由抑制性神经递质引起的。相反，这一阶段是由神经元自身的电压门控 K⁺ 通道介导的主动恢复机制，与突触传递无关。 那么抑制性神经递质起什么作用呢？实际上，在一个活跃的神经网络中，兴奋性和抑制性神经递质是并行工作的，它们在同一个神经网络中协同调控信号传递。不是互相排斥，而是实时博弈、动态平衡，共同决定一个神经元是否放电。如果没有抑制机制，过度放电，结果可能是生物癫痫、过度紧张、焦虑、甚至死亡。
视网膜中的神经递质分工在视网膜的神经传导路径中，不同类型的神经元通过特定的神经递质完成信号传递，其中最核心的递质是谷氨酸（Glutamate）和GABA（γ-氨基丁酸），它们在不同连接环节中扮演着兴奋或抑制的角色。在视网膜中，感光细胞始终释放谷氨酸，只是释放量会随着光照条件变化而不同——在黑暗中释放较多，光照下释放减少。不过，谷氨酸虽然本质上是兴奋性神经递质，它在突触后神经元中引发的是兴奋还是抑制反应，并不取决于它自身的“属性”，而是取决于突触后膜上受体的类型。也正是因为不同类型的双极细胞对谷氨酸的响应机制不同，它们才能在光暗变化中传递出完全相反的视觉信号。如图2所示，ON型双极细胞带有一种叫做 mGluR6 的代谢型谷氨酸受体，这种受体对谷氨酸的作用是抑制性的。在黑暗状态下，感光细胞会持续释放大量谷氨酸，与 mGluR6 受体结合，导致 ON 型细胞产生超极化反应，进入沉默状态。而当光照出现时，感光细胞因膜电位超极化而减少谷氨酸释放，mGluR6 失去激活，ON型细胞被解除抑制，膜电位去极化，从而被激活，开始传递”亮”的信号。与此相反，OFF型双极细胞带有的是 AMPA 和 kainate 这类离子型兴奋性受体。在黑暗中，谷氨酸大量释放，激活这些受体，使 OFF 型细胞去极化并被激活；而在光照条件下，谷氨酸减少，受体失去激活，细胞去极化中断，进入”静默”状态，从而传递“暗”的信息。简而言之，ON型双极细胞在光照下被激活，用来传递”亮”；OFF型双极细胞在黑暗中被激活，用来传递“暗”。两者所接收的都是谷氨酸，但因受体机制不同，在视觉通路中实现了对光暗变化的分流与对照编码。接着，双极细胞会把信号传给下一层的神经节细胞。它们之间也通过谷氨酸来传递，这是一种典型的”兴奋性连接”——谷氨酸会激活神经节细胞上的受体（比如 AMPA 和 NMDA），让神经节细胞产生动作电位，把信号一路往上传，最终通过视神经送到大脑皮层，形成我们看到的图像。除了这条主干路径之外，视网膜还有两类非常重要的”调节型”细胞，分别是水平细胞和无轴突细胞。它们虽然不直接传送视觉主信号，但起到”调节和优化”的作用，类似图像处理器。它们会释放像 GABA 或甘氨酸这样的抑制性神经递质，来抑制周围神经元的活动，使视觉信号更加清晰。具体来说，水平细胞负责对感光细胞的输出进行“外圈抑制”，让图像边缘更明显；而无轴突细胞则调节双极细胞和神经节细胞之间的信号传递，对亮度变化、运动方向、时间等进行精细处理。所以说，视网膜远不只是一个简单的”感光幕布”，它其实是一个复杂且高效的图像预处理系统，依靠精细的神经递质分工和兴奋—抑制平衡，让我们得以清晰、稳定、快速地看见这个世界。
再摄取泵(Reuptake transporter)在神经信号传递过程中，神经递质从突触前神经元释放到突触间隙，与突触后膜上的受体结合，引发电生理反应，完成信息的传递。然而，这些递质并不会在受体结合后立刻”消失”或”被用光”。实际上，每次释放都是成千上万的递质分子同时释放，但突触后膜上的受体数量有限，只有部分递质会被绑定并激活受体，其余则短暂滞留在突触间隙中；更重要的是，即使成功激活受体的神经递质，也会很快脱离并重新游离到突触间隙中。如果这些残留的递质没有被及时清除，就可能不断重复刺激突触后膜，引发持续、异常的神经兴奋，干扰下一次信号传递，甚至导致系统性功能紊乱。为了解决这个问题，神经系统配备了一个关键机制：再摄取泵。它是一种位于突触前膜上的特殊蛋白质，负责将多余的神经递质主动”吸回”突触前神经元的胞质内，从而终止当前信号传递，维持突触清洁，防止”信号残留”带来的干扰。摄取不仅能快速清除作用完毕的神经递质，还能将其循环利用。被回收的递质有的会被重新装入突触小泡，准备下一轮释放，有的则被降解并重新合成。这大大降低了神经元的能量负担，同时提升了信号传递效率。这种机制对多种神经递质系统都至关重要，尤其是血清素（5-HT）、多巴胺、去甲肾上腺素和 GABA 等。例如，治疗抑郁症的 SSRI 类药物（选择性血清素再摄取抑制剂）就是通过阻断血清素的再摄取泵，延长其在突触间的作用时间，从而增强神经信号强度，改善情绪状态。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
        <tag>神经递质</tag>
      </tags>
  </entry>
  <entry>
    <title>神经元内部的电信号传导</title>
    <url>/2025/05/15/%E7%A5%9E%E7%BB%8F%E5%85%83%E5%86%85%E9%83%A8%E7%9A%84%E7%94%B5%E4%BF%A1%E5%8F%B7%E4%BC%A0%E5%AF%BC/</url>
    <content><![CDATA[
电信号类型神经元之间通过神经递质传递信息，而神经元内部则通过电信号传递信息，电信号分为局部分级电位和动作电位2种类型，而传输过程分为2个阶段：

树突到轴丘：以”局部分级电位”形式存在（电压微小波动，可累加，可衰减）;
轴丘到轴突末梢：若达阈值，转化为”动作电位”（0&#x2F;1数字信号，全程恒定，不衰减）。

不管局部分级电位还是动作电位，其实都是叠加在静息电位（-70mV）这个基础状态之上进行的细胞膜（由磷脂双分子层 + 蛋白质构成的半透屏障，包裹在细胞最外层，也是细胞的外壳）电位变化。局部分级电位作用于树突和轴丘之间，信号传输的物理距离有限，并且会随着距离的长度增加而迅速衰减，最多也就只能将信号传输到轴丘处，无法进行长物理距离的信号传输（至多 1~2 mm）；而动作电位则是恒定幅度的，可以进行远物理距离的信号传输。
神经元内部的电信号传导流程典型神经元的结构较大，轴突通常较长，因此必须进行如下处理：
树突接收突触后电位（EPSP/IPSP）        ↓局部电位在胞体内整合（空间+时间）        ↓传到轴丘（动作电位的触发点）        ↓如果膜电位 ≥ 阈值（约 -55mV）        ↓动作电位在轴丘启动        ↓动作电位沿轴突传播        ↓到达突触末梢 → 引发神经递质释放
局部电位只能在短物理距离内传播（从树突到轴丘），若轴突较长（远大于局部电位的有效传输距离），则必须在轴丘处触发动作电位来传导信号。当然，并不是所有的神经元都要严格按照局部分级电位转动作电位来传导信号的，因为这只是典型神经元的信号传导动作，而对于一些非典型神经元（比如：感光细胞、双极细胞等）来说，由于自身物理结构小、轴突极短（仅几十微米），其内部的信号传输距离完全在局部电位的有效范围内，因此这类非典型神经元在电传导的时候可以不在轴丘处触发动作电位的转换，仅通过局部电位传输信号即可。住的注意的是，如果一个神经元从头到尾都只使用局部电位传输，它根本不需要在轴丘处做阈值判断。只有那些要不要触发动作电位的神经元，才有”轴丘阈值判断”这一步。
离子运动动作电位的传导始于轴丘处。当局部分级电位的电差（即：膜电位 &#x3D; 细胞膜内侧电压 − 膜外电压，单位毫伏(mV)）达到阈值（约 -55 mV）时，当前膜段的电压门控钠通道（Na⁺通道）迅速打开，钠离子（Na⁺）大量内流，引发膜内电位快速去极化（变正），形成第一个动作电位。随后，钠通道迅速进入失活状态，细胞进入绝对不应期，即使有新刺激也无法再次触发动作电位。去极化引发的电位变化在膜内外形成局部电流，推动邻近膜段电位升高；若下一段膜电位也达到阈值，就会自动触发该段动作电位，如此沿轴突向下依次传播。与此同时，前一段膜的钾通道打开，钾离子（K⁺）外流完成复极化，膜电位回落至静息状态（约 -70 mV），钠通道也从失活状态退出并恢复为可激活的关闭状态，为下一次动作电位的产生做好准备，如图1所示。
从整体来看，动作电位如同海浪一般沿细胞膜推进，膜电位在膜内外形成的局部电流构成了推进信号传导的动能，而膜段去极化和复极化过程中产生的波动信号，就是信息本体。同一神经元内部，从轴丘触发动作电位到轴突末梢传导信号，是有序、不可分割（原子性）的过程，每个动作电位沿轴突单向、连续、无中断地传导到底，不丢失、不合并、不逆流。
区分波动信号如果所有的信息本质都是电位波动，那我们大脑是怎么知道这些波动究竟代表的是”疼痛”还是”图像”还是”吃饭的欲望”？其实真实意义并不是波动本身决定的，而是由以下三个维度共同决定的：

来自哪条神经通路；
信号波动的频率和节律；
多个神经元的组合放电模式构成复杂编码。

虽然所有神经元都使用电位波动，但它走的是哪条神经线路，会告诉大脑这个信号所代表的含义：



来源
感知类型



视觉通路（视网膜 ➜ 视神经）
代表”看到”


触觉通路（皮肤 ➜ 脊髓）
代表”碰到”或”疼痛”


内脏感觉神经
代表”饥饿”或”内脏不适”


所以，大脑”解码”的第一件事就是：这段信号是从哪儿来的。而同样的神经元，如果放电频率不同、节律不同，表示的感受也会不同：



发放模式
含义



高频率
强刺激（如剧痛、强光）


低频率
弱刺激或背景状态


节奏性发放
与听觉节拍、运动节律相关


也就是说，信息不仅要看通道来源，还得看怎么发。最后，感知不是靠一个神经元完成的，而是靠一群神经元按特定顺序、同步或异步放电完成的。总之电位波动是神经系统中信息的”物理表现形式”，而它的”意义”由路径、频率、同步性这三方面共同决定。这就像莫尔斯电码：你看到的是点线波动，但真正的意思，要看发自哪里、发的频率和顺序组合。
记录神经信号的技术我们可以用电极来记录神经元的活动。电极可以放在细胞外（贴着细胞膜外面），也可以插进细胞内部。通过这些技术，我们能知道神经元什么时候发电（动作电位），还能了解多个神经元之间是否同步放电。细胞外记录：

电极放在神经元膜外，靠近某个细胞体或轴突；
当神经元放电时，膜内外电位变化会在电极上形成波动；
缺点：只能记录到电流在膜外引起的电场变化，不是细胞内真实的电压值；
类似于”隔着墙听人说话”。

细胞膜内记录：

用玻璃微电极穿进神经元膜，测量细胞膜内侧电位；
能清晰看到动作电位全过程，包含起始、上升、下降和恢复；
优点是精确；缺点是对细胞破坏较大，且难操作。

全细胞膜片钳记录：

把一个电极吸在细胞膜上一小块区域，通过破膜形成内外电路连接；
实时记录整个细胞的膜电位变化，常用于研究离子通道；
是目前最常用的高分辨率细胞电生理技术。

除了使用电极记录神经元活动外，我们还可以使用”无创”技术，避免将电极插入细胞内部。典型的方法之一是光学记录法，它通过将对膜电位敏感的荧光染料注入细胞，当细胞膜发生电位变化时，染料分子的荧光强度或发射波长也会随之变化。利用高灵敏相机（如冷CCD）或激光共聚焦系统进行实时观测，就能可视化记录神经元的电位波动。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
        <tag>信号传导</tag>
      </tags>
  </entry>
  <entry>
    <title>神经元介绍</title>
    <url>/2025/05/13/%E7%A5%9E%E7%BB%8F%E5%85%83%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[ 
神经元的功能和结构神经系统主要由中枢神经系统（CNS）和外周神经系统（PNS）构成。中枢神经系统包括大脑、小脑、脑干和脊髓，是信息处理和指令中枢；外周神经系统包括躯体神经系统与自主神经系统，前者控制骨骼肌运动（如动手、行走）并感知外界刺激（如触觉、痛觉），后者则调节心脏、胃肠、腺体等内脏器官的功能，实现对全身生理活动的自动调控。神经系统是人体的高级调控系统，负责信息感知、处理与反馈，统筹感知、运动、生理节律、内脏功能、器官协调、行为决策，并产生意识、思维、记忆等高级认知功能。 神经元也叫做神经细胞，是构成神经系统的最小单位，它的主要任务是负责接收、整合，以及传递信息。神经元和非神经元细胞之间的关系是共生关系，它们相互依赖，共同维持大脑的功能。典型的神经元结构有明显的树突和轴突，树突（输入端）负责接收信息，而轴突（输出端）末梢负责传递信息，如图1所示。值得注意的是，神经元种类很多，不是每种神经元都是典型的图1结构，但功能都类似，比如：感光细胞（视杆细胞、视锥细胞）、双极细胞等尽管没有明显的树突、轴突，但它们仍然能输入（感光）和输出（释放递质），功能和典型神经元结构等价。
连接、分布、信号的传导方式神经元信号的传导方式有2种，如下所示：

电传导：信息以生物电信号的形式传导，本质是由 钠钾离子流 产生的电压变化；
神经递质：通过突触连接，信号以神经递质（一种化学物质，比如：胺类、氨基酸类、肽类、气体类、嘌呤类等）为媒介进行传递。

每个神经元可以接收成千上万个其它神经元的信号输入，也可以将信号输出给多个其它神经元。一个神经元可以有成千上万个树突分支用来接收大量其他神经元的信号，但典型神经元结构通常只有一个轴突，但这个轴突在末端会高度分支出成千上万个轴突末梢，通过突触连接到其他神经元的树突位置，通过神经递质进行信号传输。具有相似功能的神经元通常会形成簇，但这也不是绝对的，如图2所示。
总结神经元之间传递信号，是通过电信号(生物电，极其微弱)+神经递质(也叫化学传递)来共同完成的，一个神经元内部从树突-&gt;轴突-&gt;轴突末梢，是基于电信号来传导信号；而神经元之间则是基于突触进行神经递质。多个相关功能的神经元共同构成了一类神经网络，而多个不同类型的神经网络（视觉神经网络、听觉神经网络、情绪神经网络，以及运动神经网络等）则构成了神经系统。
非神经元细胞的分类的作用非神经元细胞（统称为胶质细胞（Glial cells））是神经元的”保姆”和”卫士”，专职维持神经元的生存、功能稳定、环境平衡。它们彼此之间是共生关系，非神经元细胞的存在，就是为了”伺候好”神经元，让神经元能安心传导信号。非神经元细胞虽然不负责传递信号，但在维持神经元”活着、能工作”方面不可或缺。非神经元细胞的分类：



中文名称
英文名称
所属系统



星形胶质细胞
Astrocyte
中枢


少突胶质细胞
Oligodendrocyte
中枢


施旺细胞
Schwann cell
外周


小胶质细胞
Microglia
中枢


室管膜细胞
Ependymal cell
中枢


非神经元细胞数量比神经元多很多，在大脑中约为神经元的 3～10 倍，视区域和物种不同略有差异。



类型
数量估算



神经元
≈860 亿（约 50%）


非神经元细胞（主要是胶质细胞）
≈1,000 亿～2,000 亿（约 50%+）


非神经元细胞的主要功能：



核心功能
说明



代谢支持
供应营养物质（如葡萄糖、乳酸）给神经元


清除废物
清理神经元代谢产物、突触间隙的多余神经递质


形成髓鞘
少突胶质细胞、施旺细胞包裹神经元，提升信号传导速度


免疫监控
小胶质细胞清除病原体、死亡细胞


修复损伤
受损神经元周围激活星形胶质细胞，参与瘢痕修复


维持离子平衡
调节钾离子、钙离子浓度，保持神经元微环境稳定


其它
中枢神经系统（CNS）就是我们身体里所有神经元的大本营，主要包括大脑和脊髓，由多个神经网络（如视觉、语言、运动网络）构成;它通过不停的电活动来接收信息、处理分析、发出指令、协调身体行为。
神经元不是乱七八糟地长，而是有明确的结构位置、连接方式和排列规则;视网膜中的神经元有各种类型，按一定规律排列，信息层层传递;
神经回路有简单和复杂2种，比如：打喷嚏、眨眼、反射动作，走的是简单回路，不用经过大脑深度思考；而说话、看东西理解含义，走的是复杂回路，需要多个脑区的协同配合，信号会在多个神经网络之间跳转处理。

]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
      </tags>
  </entry>
  <entry>
    <title>神经元的信号整合与语义转换</title>
    <url>/2025/05/28/%E7%A5%9E%E7%BB%8F%E5%85%83%E7%9A%84%E4%BF%A1%E5%8F%B7%E6%95%B4%E5%90%88%E4%B8%8E%E8%AF%AD%E4%B9%89%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[
信号的整合神经元是否放电，是在轴丘处由其自身判断决定的。一个神经元通常会接收到来自成百上千个突触的输入，这些输入既可能产生兴奋性电位（EPSP），也可能产生抑制性电位（IPSP）。所有这些电位变化会在神经元的细胞体和轴丘处进行整合，而这种整合是双重的，包括空间和时间2种整合方式。

空间整合（spatial summation）: 来自不同突触位置的电信号如果同时传入，即使每个信号单独不足以引发动作电位，但它们在轴丘处叠加后，可能使膜电位总和达到阈值；
时间整合（temporal summation）: 指的是同一个突触在极短时间内快速连续释放多次神经递质，造成膜电位逐步叠加。只要释放间隔足够短，前一次信号未完全消退，下一个就接着到来，电位也能累计到阈值。

最终，在轴丘处，如果这些整合后的电位变化使膜电位达到阈值电位（约 –55mV），就会触发一次动作电位，并沿轴突迅速传导出去。这个”整合 → 判断 → 放电”的机制，完全由神经元自身完成，无需外部指令，是神经元基本的信号处理逻辑。
突触的传递效应产生兴奋性电位（EPSP）还是抑制性电位（IPSP）并不是由递质本身决定，而是由突触后膜上的受体类型决定。以谷氨酸为例，它是大脑中最主要的兴奋性递质，但它能否引发下游的兴奋性反应，要看突触后膜上是AMPA、NMDA这样的去极化型受体，还是其他抑制性的受体。同样地，GABA在GABA_A受体上会引发Cl⁻（氯离子）内流，造成膜电位下降，即抑制性电位。因此，突触传递效应的本质，取决于受体的类型和离子通道的响应，而不是”这是谁释放的信号”或”这个神经元是什么类型”。这也是为什么同一种递质在不同位置会有不同功能的根本原因。
整合后的语义转换所谓”语义转换”，是指神经元不仅接收来自其他神经元的放电信号，而且在接收并整合这些输入之后，会输出一个具有”新意义”的信号。也就是说，神经元对输入做出的反应，不是简单的电流转发，而是基于所有输入综合后的一次信息重构。比如在视网膜中，感光细胞负责感知光强，但并不能识别物体。神经节细胞则接收多个感光细胞的输入，并能识别”边缘”这种更高层次的视觉特征。更高一级的视觉皮层神经元会整合多个边缘信息，识别出”线条”、”方向”甚至”物体轮廓”。每一级神经元输出的电信号，本质上都是对前一级输入进行语义抽象和再表达的结果。因此，从生物学角度看，每一个神经元本质上就是一个”意义重构器”，它负责接收信号、判断模式、提取特征，并用一个新的神经冲动编码这一结果。神经系统的高级功能，如：感知、识别、运动控制、语言处理等，都是建立在这种”单个神经元进行语义转换”的基础之上的。信息从感受器开始，一级级传递，每一级都完成一次”信号整合”和”语义提取”，最终才构建出我们对世界的知觉与理解。可以说，大脑不是通过大量重复的神经元来完成一项复杂任务，而是依靠大量进行不同语义处理的神经元协同工作。这种分级整合、层层抽象的处理方式，使神经系统不仅能传递信号，还能理解信号背后的意义。
神经系统的发育神经系统的发育并不是一个随机连接的过程，而是一套高度受控、精密调配的工程。每一种类型的神经细胞，无论是感知型、整合型还是运动型都必须在正确的时间出现在正确的位置，并与正确的目标建立连接。这种空间和时间的双重精准控制，决定了神经系统最终能否正常工作。在这个过程中，基因起着主导作用。科学家发现，在果蝇中，有一个名为eyeless的主控基因可以控制眼睛的发育。如果让它在果蝇身体的其他部位表达，甚至会长出”异位眼睛”。而在人类和其他哺乳动物中，也有类似的同源基因，如 PAX6，同样参与调控神经系统关键结构的发育。这些基因不仅决定某个区域要长出什么器官，还会调控神经元的迁移路径、轴突的生长方向，以及最后连接的目标细胞类型。可以说，每一条神经纤维的”走线”，都由发育过程中的遗传程序精确控制，稍有偏差，可能就导致感知、运动、语言甚至意识的功能障碍。如图1所示，这张图展示了人类大脑从胚胎期到成年的发育演变。最初由简单的神经管结构出发，自第29天起逐步膨大形成脑泡，随后脑区迅速分化，皮层皱褶增多，体积持续扩展。出生后至青春期，大脑不断成长，最终发育为结构高度复杂、具备完整感知、运动与认知功能的成熟器官。整个过程在主控基因的精密调控下进行，伴随着神经元的迁移、定位与精确连接，体现了从单一原始结构向多功能分区系统的演进。因此，神经系统在发育阶段更像是一块高度复杂的电路板，每一根导线都必须接对位置，每一个节点都要在预定时刻完成连接，连接错了，整个系统的功能可能就彻底崩溃。
神经系统的再生能力在某些动物中，如鱼类或两栖类，其中枢神经系统具备一定的再生能力。当视网膜或脊髓受损后，其中的神经元可以重新生长轴突并建立新的突触连接，从而实现部分功能恢复。这种再生能力体现了该类动物神经系统的自我修复潜力。然而在人类以及绝大多数哺乳动物中，成年后的中枢神经系统（包括脑和脊髓）整体上不具备这样的修复能力。一旦发生严重损伤，如脊髓断裂或脑组织坏死，通常无法依靠自身机制完成有效修复。这主要受两方面因素限制：

成年后神经元会永久性退出细胞周期（处于 G₀ 期），不会再进行有丝分裂（即：细胞分裂，自我复制）；
损伤后形成的胶质瘢痕、分泌的抑制因子（如Nogo蛋白）等，会阻碍神经元的突起（树突和轴突）重建、突触连接恢复。

因此，神经再生的本质是让受损神经元重新长出自己的轴突或树突，并准确地连接到原本的目标位置，但在人类的中枢系统中，这一过程不仅需要神经元具备再生能力，还要求整个神经系统的环境能配合修复。而当前的现状是，神经元想长，神经系统不会再给机会。正因如此，像脊髓损伤、帕金森病、脑卒中后遗症等疾病至今仍缺乏真正有效的治愈方案。如何促进中枢神经系统中的神经元再生，并改善其外部环境，已成为世界级难题。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
        <tag>神经递质</tag>
        <tag>信号整合</tag>
      </tags>
  </entry>
  <entry>
    <title>离子分布与静息膜电位</title>
    <url>/2025/07/15/%E7%A6%BB%E5%AD%90%E5%88%86%E5%B8%83%E4%B8%8E%E9%9D%99%E6%81%AF%E8%86%9C%E7%94%B5%E4%BD%8D/</url>
    <content><![CDATA[
前言在神经元处于静息状态时，细胞膜两侧存在一个稳定的电压差——细胞内带负电，这一现象被称为静息膜电位。其根本原因在于细胞膜内外离子分布不均以及膜对不同离子的通透性差异共同作用的结果。首先，细胞内的钾离子（K⁺）浓度显著高于细胞外，而钠离子（Na⁺）和氯离子（Cl⁻）的浓度则在细胞外更高。尽管多种离子参与分布，但钾离子的作用最为关键。钾离子可以较容易地穿过细胞膜向外扩散，而钠离子和氯离子则受限于膜的低通透性，不易进出。随着大量钾离子的外流，细胞内逐渐丧失正电荷，使得细胞内部呈现负电性。这种内高外低的钾离子浓度梯度，加上膜对钾的高度通透性，促使钾离子不断从内向外扩散。然而，随着正电荷的流出，膜内负电性增强，逐渐形成一个电化学拉力，吸引钾离子回流。当这个电拉力足够强，刚好抵消浓度驱动力时，就达成了电化学平衡，静息膜电位由此确立。虽然氯离子也存在浓度差异，但它主要被动分布，并不会显著推动膜电位的形成。因此，静息电位的本质，是钾离子浓度梯度驱动下的外流行为，与电荷累积作用形成的动态平衡。这是神经元维持电生理稳定性的基础，也为后续动作电位的发生奠定了条件。细胞内外离子浓度对比：

钾：内高（117 mmol&#x2F;L）→ 外低（3 mmol&#x2F;L）
钠：外高（120）→ 内低（30）
氯：外高（120）→ 内低（4）
有机阴离子（A⁻）：只在细胞内（116），不能出膜

造成静息膜电位的主要因素是钾离子的外流，它使细胞内部电位逐渐变负，而这种负电会进一步吸引外部正离子进入或抑制更多钾离子外流。虽然氯离子（Cl⁻）并不是决定性因素，但也不是完全无关。当膜电位变负时，作为负离子的氯离子会因同极相斥而不愿进入细胞，使膜内已有的负电无法被中和而持续保留，随着钾离子的持续外流，膜内电位可能进一步变负。尽管氯离子的分布会受到电位影响，但在大多数情况下，它仅处于”电势适配”的被动状态，尤其在细胞对其通透性较低时，几乎不参与膜电位的建立，因此静息膜电位的形成主要由钾离子的浓度梯度和膜对钾的高通透性共同决定。
离子平衡与Nernst方程在神经元中，静息电位的本质是由离子在膜两侧的不对称分布和选择性通透性共同决定的。以钾离子（K⁺）为例，它在细胞内浓度高、细胞外浓度低，因此在没有其他限制的情况下，钾离子会自然地沿浓度梯度从细胞内向外扩散。这会导致细胞内失去正电荷，电位逐渐变负。随着钾离子的外流，细胞膜内部电势降低，负电荷逐渐积累。这种负电势会反过来吸引钾离子停留在膜内，与钾的浓度梯度产生对抗。当浓度梯度向外推动和电势吸引向内拉回的力量达到平衡时，钾离子就不再移动，这时膜电位达到了一个稳定值，称为钾的平衡电位（E_K），钾离子的平衡电位（Eₖ）不等于细胞膜的静息电位（Vₘ），只是它是静息电位的主要决定因素之一。这个平衡点可以通过Nernst方程计算:$$ E_K &#x3D; \frac{RT}{F} \ln \left( \frac{[K^+]{\text{out}}}{[K^+]{\text{in}}} \right) \quad (\text{单位：V})$$其中：

R 是气体常数（8.314 J&#x2F;mol·K），
T 是绝对温度（单位 K，若为37℃则 T &#x3D; 310 K），
F 是法拉第常数（96485 C&#x2F;mol）。

举例来说，若细胞外钾离子浓度为 3 mM，细胞内为 117 mM，则：$$E_K &#x3D; \frac{RT}{F} \ln \left( \frac{3}{117} \right) \approx -0.085 \text{ V} &#x3D; -85 \text{ mV}$$同理，对于带负电的氯离子（Cl⁻），由于它是负离子，Nernst 方程中仍使用相同结构，但方向自然体现为内外颠倒：$$E_{Cl} &#x3D; \frac{RT}{F} \ln \left( \frac{[Cl^-]{\text{in}}}{[Cl^-]{\text{out}}} \right)$$如果氯离子浓度比为 1:30（即细胞内浓度为 1 mM，外部为 30 mM），则：$$E_{Cl} &#x3D; \frac{RT}{F} \ln \left( \frac{1}{30} \right) \approx -0.085 \text{ V} &#x3D; -85 \text{ mV}$$这说明氯离子虽然是被动分布，但其浓度同样调节到了一个有助于维持膜电位稳定的状态。因此，Nernst 方程不仅揭示了单种离子在电势下的平衡点，也提供了我们理解细胞膜电位来源的重要工具。
电荷分布与膜电容性质尽管细胞内部和外部都很多离子，但真正用来”建立膜电位”的离子，其实只集中在细胞膜内外的”极薄一层”（细胞膜两侧紧贴在膜上的离子层建立的，其他地方的离子虽然很多，但不会直接影响电位）。就像电容器的两极板，这些带正负电的离子贴在膜的内外两侧，但它们在整个细胞中占比极小。细胞膜电位的建立并不依赖大量离子，仅靠极少数贴附在膜两侧的带电离子即可形成稳定的电位。
细胞外钾离子和氯离子对膜电位的影响在神经元等细胞中，膜电位的稳定性受细胞外钾离子浓度影响最大。钾离子本来在细胞内浓度高、外浓度低，因此会自然向外扩散，这会带走正电荷，使细胞内部变得更负，从而建立起负的膜电位。这个电位的平衡值称为钾的平衡电位（大约 -85 mV），用 Nernst 方程可以计算得出。氯离子的情况不太一样。虽然氯离子也可以自由穿过细胞膜，但它的浓度分布与电位影响是相互制约的，当细胞外氯离子减少时，它进入细胞，造成细胞内部氯浓度上升，同时会带进负电荷，使膜电位变得不那么负，从而平衡电化学梯度。
钠离子的作用与通透性虽然钾是膜电位的主要决定因素，但钠也起作用。正常情况下，细胞外钠多，内钠少，因此钠倾向进入细胞，带入正电。如果膜对钠也通透，则膜电位会变得更正一些，但通常钠通透性（通透性是指离子通过其专属离子通道的流入速率，取决于通道的数量、开放状态和传输效率，而非是否走错通道。虽然每种通道对离子具有高度选择性（如钾通道只让K⁺通过，钠通道只让Na⁺通过），但不同离子在膜电位形成中的贡献大小，仍取决于其通道的总通透性。例如，钾通道数量多且常开，通透性高，是膜电位的主要决定因素；而钠通道少且多处于关闭状态，通透性低，因此虽有一定影响，但作用较小）仅是钾的 1%-10%，所以影响较小。根据 Goldman 方程：$$V_m &#x3D; \frac{RT}{F} \ln \left( \frac{ \sum P_{\text{cation}}[\text{cation}]o + \sum P{\text{anion}}[\text{anion}]i }{ \sum P{\text{cation}}[\text{cation}]i + \sum P{\text{anion}}[\text{anion}]_o } \right)$$实际膜电位会落在钾和钠的平衡电位之间，比如钾约 -85 mV，钠约 +60 mV，膜电位最终维持在二者之间（如 -70 mV 左右的静息电位）。
恒定场方程（Goldman-Hodgkin-Katz 方程）为了理解跨膜电位（电位差）形成的机制，必须考虑多种离子同时作用于细胞膜。每种离子的跨膜流动都受其浓度差（电化学势差）驱动。以钾离子（K⁺）为例，它会从浓度高的一侧流向浓度低的一侧，同时电位差会抵消部分浓度驱动力。当流出和电场驱动达到平衡时，就形成了“钾的平衡电位（Eₖ）”。钾电流由以下公式表示：$$i_K &#x3D; g_K(V_m - E_K)$$钠电流为：$$i_Na &#x3D; g_Na(V_m - E_Na)$$假设膜电位为稳定值（即膜电流为零），钾和钠的电流就必须相等且方向相反，于是有：$$g_K(V_m - E_K) &#x3D; -g_Na(V_m - E_Na)$$通过推导可得膜电位表达式：$$V_m &#x3D; (g_KE_K + g_NaE_Na) &#x2F; (g_K + g_Na)$$当加入氯离子（Cl⁻）后，表达式扩展为：$$V_m &#x3D; (g_KE_K + g_NaE_Na + g_ClE_Cl) &#x2F; (g_K + g_Na + g_Cl)$$这就是所谓的恒定场方程，用于描述在多种离子同时影响下的膜电位。
静息膜电位的来源静息电位不是由某一种离子单独决定的，而是由多个离子在稳态下通过膜的净流动达到平衡决定的。虽然细胞通过钠钾泵保持内外离子浓度差，但膜电位最终由这些离子如何通过膜决定。假设在稳态时，钠和钾的净电流方向相反并维持平衡，其比值为 -1.5，即：$$i_Na &#x2F; i_K &#x3D; -1.5$$代入前述公式，得到新的膜电位表达式：$$V_m &#x3D; (1.5g_KE_K + g_NaE_Na) &#x2F; (1.5g_K + g_Na)$$这个表达式说明在稳态条件下，钠的输出量是钾的 2&#x2F;3（3 Na⁺ 出，2 K⁺ 入），电流方向相反。
电模型解释可以将细胞膜视为一个电路模型，由电阻和电池组成。不同离子的通道类似电阻，每种离子都有自己专属的”电池”（其平衡电位）。这些电阻与电池的组合决定了膜的总体电位。例如，钾离子的平衡电位是 -85mV，钠离子的平衡电位是 +58mV。当膜对钾通透性大时，膜电位更接近钾的平衡电位。神经细胞静息状态下，膜对钾的通透性远高于钠。
离子通道与静息膜电位的关系钾通道通常在静息状态下是开放的，因此主要决定静息电位。而钠通道多数处于关闭状态，只有少量泄漏。某些细胞中存在所谓 NALCN 的钠通道，即使在静息状态下也有钠离子缓慢流入，对膜电位产生一定影响。此外，有些氯通道也在静息状态下开放，如 CLC 通道。这些通道可能对特定细胞类型的静息电位产生重要影响。例如在运动神经元中，CLC 通道帮助维持负电位。
膜电位的变化膜电位变化是动作电位产生的基础。当某一类离子突然增加或减少其通透性时，会引发膜电位的快速改变。如果钠通道打开，Na⁺ 会流入细胞，使膜电位去极化；反之，如果钾通道打开，K⁺ 外流，使膜电位重新极化或过极化。每种离子的通透性改变都会对膜电位产生特定方向的变化。膜电位变化取决于通道的开放状态和离子浓度差。
]]></content>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
        <tag>离子通道</tag>
      </tags>
  </entry>
  <entry>
    <title>神经系统电活动的多层级传播机制</title>
    <url>/2025/07/20/%E7%A5%9E%E7%BB%8F%E7%B3%BB%E7%BB%9F%E7%94%B5%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%A4%9A%E5%B1%82%E7%BA%A7%E4%BC%A0%E6%92%AD%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[
前言神经系统的通信依赖于神经元之间电信号的传播。为了理解一个信号如何从身体的一处传到另一处，必须先理解电信号如何在单个神经元中产生与传播。电信号通常起源于神经元的某个部位，如树突、胞体或轴突丘。当这些区域受到刺激后，会发生局部电位的变化，这种变化可能会逐渐积累并超过某个阈值，引发一次完整的动作电位。动作电位是一种快速的、短暂的膜电位反转现象，可以在轴突上传播极远距离而不衰减。当动作电位产生后，它从起始点沿着神经轴突以极快的速度传播。为了加快这种信号的远距离传输，很多动物神经元的轴突外部包裹着一层由少突胶质细胞或施旺细胞形成的髓鞘。这层髓鞘具有很强的电绝缘性，可以防止电流泄漏。髓鞘之间存在一些裸露的区域，叫做郎飞结（node of Ranvier）。电信号在这些结点上被重新激发，形成所谓的跳跃式传导，也就是说电信号不是连续地沿轴突传导，而是以跳跃的方式从一个郎飞结跳到下一个。这种跳跃不仅提升了传导速度，还节省了能量。除了动作电位，还有一种更快但更局限的传导方式叫做电突触。在一些特殊的连接结构中，两个细胞之间通过连接子（connexon）直接相连，电流可以不经过化学突触而直接从一个细胞流到另一个细胞。这种传导形式非常迅速，但只在特定神经元间存在。
化学突触与电突触在神经系统中，一个神经元要将信号传给下一个神经元，必须依赖突触结构完成。突触是两个神经元之间的连接点，根据信号的传递机制不同，可以分为化学突触和电突触两种类型。这两种传递方式在结构、机制和生理功能上存在本质差异。化学突触是最常见的突触形式。当动作电位沿轴突传导至突触末端时，会引发突触前膜释放神经递质。递质穿过突触间隙，与突触后膜上的受体结合，引起下一个神经元膜电位的变化。只要突触是化学突触，动作电位传到突触末端，就一定会释放神经递质，这是一种电信号转化为化学信号再转回电信号的过程。电突触是一种特殊的突触结构，通过称为连接子（connexon）的蛋白通道连接两个神经元，使胞浆间形成低电阻通路。在电突触中，电流可以直接从一个神经元流入另一个，无需神经递质参与。即使有动作电位产生，也不会释放任何递质，因为电突触传导的是膜电位变化本身。这种方式传播速度极快，常用于神经元需要高度同步的脑区，如脑干或视网膜。
电信号的传递为了研究膜电位对外部刺激的响应，神经生理学常用的方法是向细胞注入一股小电流，并记录膜电位的变化。实验发现，电流注入后，膜电位不会立即达到一个稳定值，而是缓慢地、逐渐地上升，并最终趋于一个平台值。这种缓慢上升是由于细胞膜的电阻和电容特性决定的。神经元的细胞膜不仅是一层结构屏障，更是一个具有明确电学性质的功能性界面。在神经生理学中，研究膜电位对电流刺激的响应，往往需要借助等效电路模型进行理论分析。其中，最经典的建模方式就是将细胞膜视作一个由电阻和电容组成的RC电路。在这个模型中，膜上的离子通道提供了可变的电阻，它决定了离子跨膜流动的阻力。同时，由于细胞膜由磷脂双分子层构成，具备介电特性，可以在膜两侧积聚正负电荷，从而形成电容。因此，细胞膜既能储存电荷，又能调控离子流动，正好符合RC电路的基本结构。当向细胞注入一股恒定电流 i 时，膜电位不会立即达到某个稳定值，而是呈现出随时间逐渐上升的特征。这种电位上升并不是线性的，而是遵循指数函数的变化规律，其数学表达式为：$$\Delta V(t) &#x3D; \Delta V_{\text{max}} \left(1 - e^{-t&#x2F;\tau} \right)$$其中，\( \Delta V(t) \) 表示在注入电流后，某一时间点 \( t \) 时刻膜电位相对于初始状态的变化幅度；\( \Delta V_{\text{max}} \) 是最终能够达到的最大电位偏移量，也就是稳态电位；\( \tau \) 是膜的时间常数，它决定了膜电位上升的速度；\( e \) 是自然对数的底数，数值约为 2.718。时间常数 \( \tau \) 是由膜的输入电阻与输入电容相乘得出的，即 \( \tau &#x3D; R \cdot C \)。从生理角度来看，时间常数的大小反映了膜电位对刺激的反应速度。当时间 \( t &#x3D; \tau \) 时，膜电位大约上升到最大值的 63%。在 \( t &#x3D; 3\tau \) 时，这一值接近 95%；而到了 \( t &#x3D; 5\tau \) 时，膜电位几乎已达到稳态，变化趋于结束。这个RC模型为理解神经元如何响应持续刺激、如何整合突触输入提供了重要的理论基础。无论是在注流实验、电刺激建模，还是突触后电位的时间积分计算中，该模型都是不可或缺的分析工具。
电位上升速度由时间常数 τ 决定时间常数 τ（&#x2F;taʊ&#x2F;）是决定膜电位反应速度的核心参数，其物理含义是膜电位达到最大变化的 $63%$ 所需的时间。这个值越大，表示膜电位变化越慢；越小，表示膜对电流变化反应越快。时间常数由下式定义：$$\tau &#x3D; R_{\text{input}} \cdot C_{\text{input}}$$其中 \( R_{\text{input}} \) 是输入电阻，表示单位电流引起的膜电位变化量；而 \( C_{\text{input}} \) 是输入电容，表示单位电压所需的电荷量。如果细胞膜上有很多离子通道，意味着膜电阻小，那么注入的电流很快就会流出细胞，导致电位变化迅速。而如果电容很大（如大细胞或厚膜），电荷储存需要时间，也会延缓电位变化。实验上观察到：当 \( t &#x3D; \tau \) 时，膜电位变化达到 \( \Delta V_{\text{max}} \cdot (1 - e^{-1}) \approx 63% \)；当 \( t &#x3D; 3\tau \) 时，已达95%以上。
电位变化结束后的指数衰减过程在停止电流注入之后，膜电位也不会立即恢复原值，而是会以相反的方式——即指数衰减缓慢下降回静息电位。这一过程可用以下公式描述：$$\Delta V_m(t) &#x3D; \Delta V_{\text{max}} \cdot e^{-t&#x2F;\tau}$$这个公式与上升公式正好对称，体现了细胞膜的”被动电响应”特性。衰减速度仍由相同的时间常数τ决定。时间越久，膜电位越接近初始水平。这个缓慢恢复的现象在生理中有重要意义，比如它决定了神经元对高频刺激的响应能力，也影响信号整合与突触后的时间窗口。
神经纤维里的电流传播神经纤维（nerve fiber）本质上是神经元的一部分，通常指的是从神经元细胞体（soma）延伸出去的轴突（axon）或树突（dendrite），其中轴突是最主要的传导结构。它是用来传递电信号的电缆，长度可以从几毫米延伸到超过一米。在理解神经信号如何沿神经纤维传播之前，我们首先要知道，神经纤维并不是简单的导电电线，而是一种具备复杂电学特性的生物结构。其膜不仅具有电阻，还具备电容，这使得它在电流注入时的响应非常类似一个RC电路。更进一步，由于神经纤维是细长的圆柱形结构，我们可以将其抽象为一个连续的电缆，这也是神经电生理学中经典的电缆理论模型。在球形细胞中，电流注入后的膜电位变化主要由膜电阻和电容控制。例如，1 cm² 的细胞膜电容约为 \( 1,\mu\text{F} \)，膜电阻约在 1~10 \( \text{k}\Omega \) 范围内。但在神经纤维这类细长结构中，我们不再使用总值，而采用单位长度的膜电阻（\( r_m \)，单位 \( \Omega\cdot\text{cm} \)）、膜电容（\( c_m \)，单位 F&#x2F;cm）和轴内电阻（\( r_i \)，单位 \( \Omega&#x2F;\text{cm} \)）作为基础电学参数。这三者共同决定了电信号沿纤维的传播能力和速度。当将一股电流注入神经纤维的某一点时，电流会沿纤维两端扩散，而不是集中传输。这种电位变化沿距离以指数方式衰减，其数学表达为: \( \Delta V &#x3D; \Delta V_0 e^{-x&#x2F;\lambda} \)，其中 \( \lambda \) 是“长度常数”，表示电位衰减至原值的 37% 所对应的距离。这个长度常数反映了电信号在纤维中能传播多远。长度常数越大，电位传播越远，其计算公式为:$$\lambda &#x3D; \left( \frac{a r_m}{2 \rho} \right)^{1&#x2F;2}$$其中 \( a \) 是纤维半径，\( \rho \) 是细胞内液体的电阻率。由此可见，轴突越粗（半径越大），长度常数越大，信号传播也就越远。另一个关键参数是输入电阻，它表示从微电极注入电流后，纤维整体对该电流的响应强度。其计算公式为：$$r_{\text{input}} &#x3D; 0.5 \cdot \left( \frac{r_m r_i}{\pi^2 a^3} \right)^{1&#x2F;2}$$这说明轴突越粗，输入电阻越低，电流越容易注入且能激发更大范围的膜电位变化。输入电阻和长度常数的依赖关系均揭示：粗轴突更适合远距离、高效率的电信号传播。此外，注入电流后的膜电位上升不是瞬间完成的，而是随时间逐渐接近稳态，其时间进程由“时间常数”控制，即 \( \tau &#x3D; R_m \cdot C_m \)。这个时间常数反映了膜对电信号的响应速度，数值越大，反应越慢。实验也证实了上述模型的有效性。在一段轴突中插入两个电极，向其中一端施加电流后，沿纤维记录电压的变化，可以观察到电位的指数衰减曲线。这个现象正是电缆模型的预测结果。总的来说，神经纤维的电信号传播受限于三个关键因素：膜电阻 \( r_m \)、轴向电阻 \( r_i \)、膜电容 \( c_m \)。它们共同决定了神经信号传导的速度和有效距离。粗大的轴突具有更小的内阻和更大的长度常数，因此比细纤维能更有效地传播信号，这也解释了为何许多高速传导的神经通路都具有髓鞘化的粗大轴突。理解这些电学机制，不仅对神经科学研究至关重要，也为神经工程和人工神经网络的建模提供了重要理论依据。
动作电位沿神经纤维传播的方式当一个神经元产生动作电位时，它并不是在整条神经纤维上同时升起电压，而是沿着纤维一段一段地跳跃传播。这种传播方式称为电解质电缆式传导，其核心机制是局部电流回路。动作电位在某一点发生时，会导致该处膜内外出现瞬时电位差，进而引发电流从已激活区域流向尚未激活区域。由于邻近膜片的电位被这种局部电流拉高，达到了阈值，就会触发下一段膜产生动作电位，这样依次向前推进，形成一种自我推进的电信号波动。在细胞膜去极化的区域，钠离子流入造成局部膜电位上升；随后钾离子外流则帮助膜电位复极。这种离子流动形成一个局部电流环路，维持了膜电位的时序变化。这种头带尾追的机制导致信号只能向一个方向传导，原因是动作电位发生后的区域会进入不应期，此时钠通道失活，暂时无法再次激发动作电位，阻止了信号倒流。动作电位的典型传播速度为 10 m&#x2F;s，但具体速度会根据神经纤维直径、髓鞘包裹情况而异。越粗的纤维、髓鞘越厚，信号传播越快。如果相邻两段膜的去极化时间间隔过长，信号可能会中断，这时就需要更高频率或强度的电刺激来维持传播。
有髓神经纤维在哺乳动物周围神经系统中，许多轴突外包裹着髓鞘，这是一种由施旺细胞或寡突胶质细胞形成的脂质层。髓鞘本身是不导电的，它像绝缘胶带一样包裹住轴突，中间留下一段一段未包裹的缝隙，这些缝隙叫做郎飞结（Ranvier node）。电信号不会连续地沿整个轴突移动，而是从一个郎飞结跳到下一个，形成所谓的跳跃式传导（saltatory conduction）。每次跳跃都跨过一大段髓鞘区域，从而显著加快了传导速度。在有髓神经纤维中，信号速度可达每秒 120 米，而无髓神经纤维往往只有 0.5~2 米&#x2F;秒。郎飞结处密集分布着电压门控钠通道，能有效触发新一轮动作电位。而髓鞘区域则几乎不含钠通道，因此电流无法泄露，只能集中传播到下一个郎飞结。这种结构大幅提高了信号的能量效率与速度。
神经纤维的几何形状也会造成传导阻滞不是所有结构都适合动作电位传播。分支复杂、树突过细或带有异常扩张的部位容易形成传导阻滞。在这些区域，细胞膜可能无法提供足够的离子流支撑动作电位的完整传播，从而导致信号停滞或反射传播失败。例如在感觉神经末梢，许多末端纤维会逐渐变细分支，如果分支末端半径过小，就可能无法维持去极化所需的电流密度，导致信号终止。这种现象解释了为何某些感觉在末梢区域显得“模糊”或反应迟缓。
树突动作电位的传播在某些神经元中，动作电位并不总是从轴突起始段开始。小脑浦肯野细胞等类型的神经元在树突区域也具备动作电位的触发能力。实验记录显示，当在树突某点给予去极化电流刺激时，局部会产生动作电位，并可向胞体方向反向传播。电极在树突各点记录到的电位变化波形显示，这种反向传播具有频率依赖性和距离依赖性。越靠近胞体的部位，动作电位的幅度越高、传播越稳定；越远离胞体，动作电位的幅度衰减越明显。在高频刺激条件下，树突能产生一连串动作电位。这些动作电位可以传入细胞体，引发细胞整体放电。胞体记录到的动作电位较大、持续时间较短；树突记录到的动作电位更缓慢，具有典型的钠去极化与钾复极化过程。在动作电位传播过程中，树突和胞体的去极化存在时序差异。在大多数神经元中，动作电位最终仍需在胞体或轴突起始段整合达阈后被触发。但树突的信号整合能力使其在突触输入调节中扮演关键角色。
树突与缝隙连接的协同作用如图1所示，动作电位不一定总是由胞体触发，有些类型神经元的树突同样具备自主兴奋能力。树突的动作电位在特定条件下可以反向传播至胞体，调节其兴奋状态。这种机制支持突触输入的复杂整合，也为突触可塑性提供了条件基础。另一方面，缝隙连接（本质上就是两个连接子对接形成的跨膜连接通道，构成了电突触的结构基础）提供了神经元之间无需突触、无需神经递质就能直接传导电流的物理路径。它由连接素蛋白构成，可形成上百个细胞间通道，实现在毫秒级时间内跨细胞同步放电或信号共享。这种结构广泛存在于发育中或节律控制区域，在维持生理功能和调节电活动节律中起关键作用。动作电位的跨膜触发、胞内传导与细胞间耦合构成神经系统中电信号传播的多个层级。树突的主动性与缝隙连接的直接性分别代表了细胞内和细胞间电传播的两种机制，它们共同构建了高效、精确而灵活的神经电信号网络。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>神经网络</tag>
        <tag>离子通道</tag>
        <tag>电信号传导</tag>
      </tags>
  </entry>
  <entry>
    <title>高频交易场景下的订单计数系统设计</title>
    <url>/2025/04/15/%E9%AB%98%E9%A2%91%E4%BA%A4%E6%98%93%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E8%AE%A2%E5%8D%95%E8%AE%A1%E6%95%B0%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[背景在实际的开发过程中，计数统计是一项非常常见的功能性需求。无论是在内容类平台，还是社交类应用中，都广泛存在着计数类场景。例如，在博客系统中，我们需要展示不同分类下的文章数量；在微博系统中，则可能涉及到展示粉丝数量、关注数、微博数、评论数等多维度数据。
数据的变更频率和C端访问压力，往往决定了不同的技术方案选型。为了高效、稳定地支撑业务所需的计数统计功能，业界通常有3种主流方案可供选择：

基于 RDBMS 的 COUNT+GROUPBY 统计查询；
基于 Elasticsearch 倒排索引的聚合统计；
基于最终一致性的计数统计方案。

本文我们将深入探讨在高频交易场景下，订单计数功能应该怎么去设计和实现。我们的实际单量在百万级&#x2F;天，C端需要对客展示 ‘待支付’ 和 ‘待出行’ 等2种STATE的的订单数量，如果直接使用COUNT+GROUPBY语句去交易库中查询会对DB产生较大压力。尽管在RDBMS中，单片千万数量级的统计查询在命中联合索引的情况下，能够做到毫秒级响应，但为了避免并发量过大导致系统雪崩，以及同时考虑到这个订单计数功能并非主流程的核心功能，因此我们决定采用最终一致性的订单计数方案。
基于最终一致性的订单计数方案如图1所示，当交易系统成功流转订单STATE（to 待支付、to 待出行）后，会异步通知订单计数服务。待计数服务消费到指定用户的订单数量变更事件后，会自行计算并更新CACHE中的订单总数（比如：待支付:0，待出行：1）。而当用户发起订单数量查询请求时，计数服务直接从CACHE中获取订单数量返回，不再需要每次都通过COUNT+GROUPBY语句实时统计查询，从而大幅降低DB的负载压力。
基于上述方案，大家重点思考2个问题：

存量数据如何预热？
如何保证CACHE中的订单数量和交易库中的真实订单数量的数据一致性？

存量数据预热正常情况下，我们很容易想到，当C端发起查询请求时，如果计数服务从CACHE中获取不到数据，那么计数服务可以先同步去交易库中执行COUNT+GROUPBY语句再预热。在此大家需要注意，在分布式环境下，任意执行环节出错都会影响数据的一致性。如图2所示，假设交易系统正常流转完订单STATE（将STATE从「待支付」变更为「待出行」）后，此时DB中的真实用户订单数量为：待支付0，待出行1；交易系统下发变更事件给计数服务时如果发生网络抖动，C端发起查询时由于CACHE MISS，计数服务由于直接同步向交易库执行COUNT+GROUPBY语句再预热，这时尽管用户的订单数量能够正确显示为：待支付0，待出行1，但后续网络抖动恢复后，由于计数服务存在延迟消费，必然会导致正确的用户数据被错误篡改，从而产生脏读（待支付-1，待出行2）。
那如果查询时CACHE MISS且完成数据预热后，对于因网络抖动导致的异常变更事件不再更新CACHE，是否就能确保数据一致性？虽然想法很美好，但这似乎并不现实，因为这根本做不到，计数服务如何感知因网络抖动导致的异常变更事件？但却能基于EVENT ID去做幂等去重，防止计数服务因重复消费导致的数据不一致问题。
那查询时，计数服务穿透到DB获取数据后直接返回而不再进行预热是否可行？意思就是当C端发起查询时IS CACHE MISS，计数服务都不再执行预热动作，而是依靠写时更新（即：交易系统在流转完订单STATE后，下发事件给计数服务，计数服务根据IS CACHE MISS来决定执行预热事件还是变更事件），如图3所示：
写时更新尽管可以从最大程度上确保CACHE和DB的数据一致性，但从业务的执行流程上来说，如果用户长时间没有发生实际的交易行为，那么大量的查询请求将会导致交易库被击穿，从而产生雪崩。那数据预热到底是由写请求还是读请求发起？答案就是读&#x2F;写请求CACHE MISS时都要进行数据预热操作。读操作计数服务发起预热有2种情况，分别是CACHE MISS和CACHE失效（逻辑失效，下一小节会讲到），这2种情况都应该先直接返回脏数据（CACHE MISS时返回0），Lock acquired时异步发起预热事件，Failed to acquire lock时则Failfast，不重试的原因是为了避免无效的重复预热动作，因为CACHE不失效没必要进行全量数据预热。而写时要根据IS CACHE MISS来决定是执行预热事件还是变更事件，Lock acquired时如果CACHE MISS要把变更事件转为预热事件执行，而Failed to acquire lock时要执行Failover，以便于变更事件的正常流转，降低对客脏读风险。在此大家需要注意，最终一致性方案的本质就是可用优先+高频近似正确原则，业务上务必要具备和支持短期数据不一致的容错性。
数据校准换句话说，最终一致性方案就是业务上允许数据存在一定程度上的脏读，但要尽可能缩短数据不一致的窗口期，尽可能降低对客体验影响。如图4所示，针对脏数据，我们的思考方向不再是强一致性，而是尽可能保证一致性，解决方案就是数据校准，那应该怎么校准？给CACHE数据加上一份过期时间（逻辑失效），单位可以是秒、分、小时，这根据具体的业务场景而定，过期时间决定了数据不一致的窗口期大小，如果窗口期太长，对客影响会非常明显，如果窗口期过短，又会加重DB负载，所以业务上我们要在用户体验和系统性能之间折中权衡。
这里之所以没有设置CACHE的TTL，是因为如果CACHE MISS时返回0，那么数据预热后假设返回1，那么数据会持续在0和1之间切换，对客体验非常差，所以我们选择数据常驻内存，通过业务过期手段来使数据看上去是规律递增而不是无规律乱跳的，尽可能增强用户体验。也就是说，CACHE的数据结构在设计时要显式指定一个业务过期字段，如图5所示：
写在最后，在 分布式系统架构设计中，方案永远无法做到“既要… 又要… 还要…”。
]]></content>
      <categories>
        <category>系统架构</category>
      </categories>
      <tags>
        <tag>架构设计</tag>
        <tag>高频交易系统</tag>
        <tag>计数系统</tag>
      </tags>
  </entry>
  <entry>
    <title>视网膜的细胞</title>
    <url>/2025/05/13/%E8%A7%86%E7%BD%91%E8%86%9C%E7%9A%84%E7%BB%86%E8%83%9E/</url>
    <content><![CDATA[
视网膜的细胞类型我们看见的图像，是通过视网膜上的多种神经元层层处理(采集信号)后，最终传输给大脑的。人类视网膜上总共有3层神经元，其中第1层神经元是感光细胞，分为：

视杆细胞：负责黑白、暗光视觉；
视锥细胞：负责颜色、细节、明亮环境；

由感光细胞负责把光信号转为电信号，并传导给第2层的双极细胞（中转站）。在这个过程中水平细胞和无长突细胞负责调节信号。

水平细胞：在感光细胞和双极细胞之间，调节周围感光细胞信号，增强图像边缘清晰度（横向调节）。
无长突细胞：在双极细胞和节细胞之间，调节信号的时序、动态响应（比如运动感知）。

然后，双极细胞把整合后的信号传递给第3层的节细胞（神经节细胞）。节细胞负责整体汇总，节细胞的轴突末梢形成视神经，通过神经递质将信号传递给大脑视觉皮层。在大脑处理之后，我们才能真正看到一幅图像。光 → 感光细胞 → 双极细胞 → 节细胞 → 大脑视觉皮层，中间的水平细胞和无长突细胞是调节信号的，但不是主干传输通道，主干传输通道是双极细胞，如图1所示。
视网膜的细胞数量视网膜的神经信息传递是一个“多对一”的逐级压缩过程，结构上呈现为漏斗状。



层级
细胞类型
数量级估算（单眼）



第一层
感光细胞（视杆 + 视锥）
≈1.26 亿个（视杆≈1.2 亿，视锥≈600 万）


第二层
双极细胞（Bipolar cells）
≈1 亿个（估算范围：8000 万 ~ 1.1 亿）


第三层
节细胞（Ganglion cells）
≈120 万个（视神经纤维数 &#x3D; 节细胞数）


视杆细胞的数量是远多于视锥细胞的，视杆细胞在感光细胞中的占比≈95.2%，视锥细胞占比≈4.8%。这是因为在人类漫长的进化史中，我们往往需要在黄昏、夜晚、森林中活动，明暗&#x2F;运动感知比色彩更关键（比如：辨别敌人、猎物），视杆细胞对微弱光线极为敏感（只需1个光子就能被激活），因此为了优先解决生存矛盾，确保我们在暗光环境下能够看得见，视杆细胞的数量必然远大于视锥细胞。而视锥细胞是”精细视觉和颜色感知”的进化升级，尽管数量少，但能保证高精度解析、颜色分辨，但对光敏感度较低，几乎只在白天这种明亮环境中工作。总之视杆细胞多，是因为它保证你在黑暗、低光、周边环境中“看得见”，这是生存的底线；而视锥细胞少但精准，是为了提升颜色与细节识别，功能的优先级不同，决定了数量分布差异。
探索神经元结构和追踪其连接的技术神经细胞是透明的，普通光照无法产生清晰对比，因此我们可以使用各种细胞染色（高尔基Golgi）技术、基因标记技术来使细胞现行，然后再通过显微镜进行放大观测（200x–400x），就能看到神经元的树突、轴突等结构与连接模式。需要注意的是，哪怕使用最先进的光学显微镜（如共聚焦、双光子显微镜），如果没有荧光标记或染色，细胞还是隐身的。
题外话很多人认为猫狗的视网膜只能看到黑白图像，但实际上并非如此。猫狗的视网膜中同样存在视杆细胞和数量相对较少的视锥细胞。虽然它们缺乏对红色和绿色的感知能力，因此属于”色觉缺陷”或”色盲”，但它们仍然可以感知蓝色和黄色，也就是说，它们看到的世界是有限色彩的，但并非黑白。
]]></content>
      <categories>
        <category>神经生物学</category>
      </categories>
      <tags>
        <tag>神经元</tag>
        <tag>视网膜</tag>
        <tag>神经网络</tag>
      </tags>
  </entry>
</search>
